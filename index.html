<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="M-X Lumes: Professional 3:1 Epoxy Resin Systems.">
    <meta name="theme-color" content="#fafafa">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>M-X Lumes | The Professional Standard</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <link rel="preload" href="product-1.webp" as="image">
    <link rel="preload" href="MX_LUMES_4_8kg_Master_Kit.png" as="image">
    <link rel="preload" href="MX_LUMES_20kg_Set_15kg_Resin_5kg_Hardener.png" as="image">
    
    <style>
        /* =========================================
           1. CORE VARIABLES & RESET
           ========================================= */
        :root {
            --bg-oled: #000000;
            --bg-panel: #050505;
            --text-main: #ffffff;
            --text-dim: #9ca3af;
            
            /* Light Theme Variables */
            --bg-milky: #fafafa;
            --bg-pure: #ffffff;
            --text-dark: #050505;
            --text-muted: #4b5563;
            --border-light: #e5e7eb;
            
            --accent: #6366f1;
            --accent-glow: rgba(99, 102, 241, 0.4);
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            
            --border: rgba(255, 255, 255, 0.1);
            --glass: rgba(15, 15, 15, 0.9);
            --blur: blur(12px); 
            --radius: 24px;
            
            --ease-fluid: cubic-bezier(0.16, 1, 0.3, 1); 
            --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
            --whatsapp: #25D366;
            
            --safe-top: env(safe-area-inset-top);
            --safe-bottom: env(safe-area-inset-bottom);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        html { font-size: 16px; scroll-behavior: smooth; width: 100%; overflow-x: hidden; -webkit-font-smoothing: antialiased; }
        
        body { background-color: var(--bg-oled); color: var(--text-main); font-family: 'Manrope', sans-serif; line-height: 1.6; width: 100%; max-width: 100vw; overflow-x: hidden; position: relative; }

        h1, h2, h3, h4 { font-family: 'Space Grotesk', sans-serif; line-height: 1.1; letter-spacing: -0.02em; }
        a { text-decoration: none; color: inherit; transition: color 0.3s var(--ease-fluid); }
        button { cursor: pointer; border: none; outline: none; background: none; font-family: inherit; }
        img { display: block; max-width: 100%; height: auto; user-select: none; }
        input, select, textarea { font-size: 16px !important; }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }

        /* =========================================
           2. BACKGROUND ENGINE
           ========================================= */
        .bg-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: -5; background-color: var(--bg-oled); background-image: url('product-1.webp'); background-position: center bottom; background-repeat: no-repeat; background-size: 65%; opacity: 0.6; transform: translateZ(0); }
        .bg-gradient { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: -4; background: linear-gradient(to bottom, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.8) 50%, #000000 90%); pointer-events: none; transform: translateZ(0); }

        /* =========================================
           3. UI COMPONENTS & ANIMATIONS
           ========================================= */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; width: 100%; }
        .section { padding: 100px 0; position: relative; z-index: 2; }
        .reveal { opacity: 0; transform: translate3d(0, 40px, 0); transition: opacity 0.8s var(--ease-fluid), transform 0.8s var(--ease-fluid); }
        .reveal.active { opacity: 1; transform: translate3d(0, 0, 0); }

        .btn { padding: 16px 32px; border-radius: 60px; font-weight: 700; text-transform: uppercase; font-size: 11px; letter-spacing: 1.5px; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; min-height: 48px; transition: transform 0.4s var(--ease-fluid), box-shadow 0.4s var(--ease-fluid), background-color 0.3s; }
        .btn:hover { transform: translate3d(0, -3px, 0); }
        .btn-primary { background: #fff; color: #000; box-shadow: 0 5px 20px rgba(255,255,255,0.15); }
        .btn-primary:hover { box-shadow: 0 12px 30px rgba(255,255,255,0.3); }
        .btn-primary:active { transform: scale(0.96) translate3d(0,0,0); box-shadow: 0 2px 10px rgba(255,255,255,0.1); } 
        .btn-outline { border: 1px solid var(--border); color: #fff; background: rgba(255,255,255,0.02); }
        .btn-outline:hover { border-color: #fff; background: rgba(255,255,255,0.08); }

        .toast { position: fixed; top: 20px; left: 50%; transform: translate3d(-50%, -150%, 0); background: rgba(20,20,20,0.95); border: 1px solid rgba(255,255,255,0.2); padding: 15px 30px; border-radius: 50px; color: #fff; font-size: 13px; font-weight: 700; z-index: 9999; opacity: 0; transition: transform 0.5s var(--ease-spring), opacity 0.5s var(--ease-fluid); box-shadow: 0 10px 40px rgba(0,0,0,0.5); display: flex; align-items: center; gap: 10px; width: 90%; max-width: 350px; justify-content: center; }
        .toast::before { content:'✓'; color:var(--success); font-size:16px; }
        .toast.show { transform: translate3d(-50%, 0, 0); opacity: 1; }

        /* =========================================
           4. NAVIGATION (MILKY WHITE STRIP)
           ========================================= */
        .navbar { position: fixed; top: 0; width: 100%; height: 80px; z-index: 1000; display: flex; align-items: center; transition: box-shadow 0.4s var(--ease-fluid), height 0.4s var(--ease-fluid); background-color: var(--bg-milky); border-bottom: 1px solid var(--border-light); padding-top: var(--safe-top); }
        .navbar.scrolled { box-shadow: 0 10px 30px rgba(0,0,0,0.1); height: 70px; }
        .nav-inner { width: 100%; display: flex; justify-content: space-between; align-items: center; overflow-x: visible; padding-bottom: 0; }
        
        .logo-wrapper { position: relative; display: flex; align-items: center; }
        .logo { font-weight: 800; font-size: 18px; letter-spacing: 3px; color: var(--text-dark); flex-shrink: 0; margin-right: 20px; z-index: 2; mix-blend-mode: normal;}
        #resin-s { display: inline-block; transform-origin: center; }
        
        /* Barasingha Deer Animation Wrapper */
        .animal-wrapper { position: absolute; left: 100%; top: 50%; transform: translateY(-50%); width: 50px; height: 50px; pointer-events: none; z-index: 10; }

        /* Fixed Mobile Popup */
        #hardness-popup { position: absolute; top: calc(100% + 12px); right: -5px; background: rgba(239, 68, 68, 0.95); color: #fff; font-size: 10px; font-weight: 800; padding: 8px 12px; border-radius: 6px; text-transform: uppercase; letter-spacing: 1px; pointer-events: none; opacity: 0; z-index: 11; box-shadow: 0 5px 20px rgba(239, 68, 68, 0.4); white-space: normal; width: max-content; max-width: 220px; text-align: right; line-height: 1.4; border: 1px solid rgba(255,255,255,0.2); }
        #hardness-popup::after { content: ''; position: absolute; top: -6px; right: 15px; border-width: 0 6px 6px 6px; border-style: solid; border-color: transparent transparent rgba(239, 68, 68, 0.95) transparent; }

        .nav-links { display: flex; gap: 30px; align-items: center; margin-left: auto; }
        .nav-link { font-size: 11px; font-weight: 600; text-transform: uppercase; color: var(--text-muted); letter-spacing: 1px; white-space: nowrap; }
        .nav-link:hover { color: var(--text-dark); }

        .hero { min-height: 80dvh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; z-index: 10; padding-top: 80px; padding-bottom: 40px; position: relative; }
        .hero h1 { font-size: clamp(42px, 10vw, 100px); margin-bottom: 24px; font-weight: 800; background: linear-gradient(180deg, #ffffff 0%, #a0a0a0 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; line-height: 1.1; }
        .hero p { color: var(--text-dim); font-size: 18px; max-width: 500px; margin-bottom: 40px; padding: 0 20px; }

        /* Rotating Premium Stamp */
        .premium-stamp { position: absolute; top: 20%; right: 12%; width: 140px; height: 140px; animation: spinStamp 15s linear infinite; z-index: 5; pointer-events: none; opacity: 0.9; filter: drop-shadow(0 10px 20px rgba(239, 68, 68, 0.3)); }
        @keyframes spinStamp { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .marquee { position: absolute; bottom: 0; width: 100%; background: #000; border-top: 1px solid var(--border); padding: 16px 0; overflow: hidden; white-space: nowrap; user-select: none; }
        .marquee-content { display: inline-block; animation: scroll 40s linear infinite; transform: translateZ(0); }
        .marquee-item { font-size: 11px; font-weight: 800; text-transform: uppercase; letter-spacing: 3px; color: var(--text-dim); margin: 0 40px; opacity: 0.7; }
        @keyframes scroll { 0% { transform: translate3d(0,0,0); } 100% { transform: translate3d(-50%,0,0); } }

        /* =========================================
           5. SHOP & GRIDS (SILVERISH GLASS)
           ========================================= */
        .stats-bar { border-bottom: 1px solid var(--border); padding: 40px 0; margin-top: -1px; }
        .stats-grid { display: flex; justify-content: space-around; flex-wrap: wrap; gap: 30px; text-align: center; }
        .stat-num { font-size: 32px; font-weight: 800; color: #fff; display: block; margin-bottom: 5px; }
        .stat-lbl { font-size: 10px; text-transform: uppercase; color: var(--text-dim); letter-spacing: 1.5px; }

        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        
        .product-card { padding: 30px; display: flex; flex-direction: column; justify-content: space-between; height: 100%; transition: transform 0.4s var(--ease-fluid), box-shadow 0.4s var(--ease-fluid), border-color 0.4s; background: linear-gradient(135deg, rgba(230, 230, 240, 0.15) 0%, rgba(180, 180, 190, 0.05) 100%) !important; backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.15) !important; border-radius: var(--radius); }
        .product-card:hover { transform: translate3d(0, -10px, 0); border-color: rgba(255,255,255,0.5) !important; background: linear-gradient(135deg, rgba(230, 230, 240, 0.25) 0%, rgba(180, 180, 190, 0.1) 100%) !important; box-shadow: 0 25px 50px rgba(0,0,0,0.6); }
        
        .p-img { width: 100%; height: 280px; object-fit: cover; border-radius: 16px; margin-bottom: 25px; opacity: 0.9; transition: opacity 0.4s; }
        .product-card:hover .p-img { opacity: 1; }
        .p-tag { font-size: 10px; border: 1px solid var(--border); padding: 6px 12px; border-radius: 20px; color: var(--text-dim); text-transform: uppercase; display: inline-block; margin-bottom: 15px; letter-spacing: 1px; }

        .support-card { background: linear-gradient(135deg, rgba(37, 211, 102, 0.08) 0%, rgba(0,0,0,0) 100%); border-color: rgba(37, 211, 102, 0.2); text-align: center; padding: 60px 30px; transition: transform 0.4s var(--ease-fluid), box-shadow 0.4s, border-color 0.4s; }
        .support-card:hover { border-color: rgba(37, 211, 102, 0.5); box-shadow: 0 20px 50px rgba(37, 211, 102, 0.1); transform: translate3d(0, -5px, 0); }

        /* =========================================
           6. TECHNOLOGY & SPECS
           ========================================= */
        .tech-card { padding: 40px; border-top: 1px solid rgba(255,255,255,0.15); transition: transform 0.4s var(--ease-fluid), box-shadow 0.4s; height: 100%; display: flex; flex-direction: column; }
        .tech-card:hover { background: rgba(255,255,255,0.03); border-color: var(--accent); transform: translate3d(0, -8px, 0); box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
        .tech-icon { font-size: 40px; margin-bottom: 20px; }
        .tech-sub { font-size: 12px; text-transform: uppercase; letter-spacing: 2px; color: var(--accent); margin-bottom: 15px; font-weight: 700; }
        .tech-list { margin-top: 30px; list-style: none; padding: 0; }
        .tech-list li { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 13px; color: var(--text-dim); }
        .tech-list li span { color: #fff; font-weight: 700; font-size: 16px; font-family: 'Space Grotesk', sans-serif; }
        .tech-list li:last-child { border-bottom: none; }

        .gallery-masonry { column-count: 3; column-gap: 20px; }
        .g-item { break-inside: avoid; margin-bottom: 20px; border-radius: 16px; overflow: hidden; border: 1px solid var(--border); background: #0a0a0a; transition: transform 0.4s var(--ease-fluid), border-color 0.4s; }
        .g-item:hover { transform: scale(1.02); border-color: rgba(255,255,255,0.3); }
        .g-img { width: 100%; height: auto; display: block; }

        .comp-container { background: #050505; border: 1px solid var(--border); border-radius: 30px; padding: 40px; overflow: hidden; position: relative; }
        .comp-container::before { content:''; position: absolute; top:0; right:0; width: 50%; height: 1px; background: linear-gradient(90deg, transparent, var(--accent)); }
        .comp-wrapper { width: 100%; display: block; margin-bottom: 50px; border-radius: 24px; border: 1px solid var(--border); background: #0a0a0a; }
        .comp-table { width: 100%; border-collapse: collapse; table-layout: auto; }
        .comp-table th { text-align: left; padding: 20px; color: var(--text-dim); font-size: 11px; text-transform: uppercase; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .comp-table th.col-mx, .comp-table td.col-mx { width: 40%; background: rgba(99,102,241,0.03); border-right: 1px solid rgba(99,102,241,0.1); border-left: 1px solid rgba(99,102,241,0.1); }
        .comp-row { transition: background-color 0.2s; }
        .comp-row:hover { background: rgba(255,255,255,0.03); }
        .comp-cell { padding: 25px 20px; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 15px; color: #fff; }
        .comp-cell.dim { color: #555; font-weight: 500; }
        .comp-cell.bright { color: #fff; font-weight: 700; text-shadow: 0 0 15px rgba(99,102,241,0.3); }
        .comp-cell.bright span { color: var(--accent); margin-right: 8px; }
        .comp-footer { margin-top: 40px; padding-top: 30px; border-top: 1px solid var(--border); display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }

        .dos-donts { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .dd-box { padding: 50px; border-radius: 24px; border: 1px solid var(--border); transition: transform 0.4s var(--ease-fluid), border-color 0.4s, box-shadow 0.4s; }
        .dd-box:hover { transform: translate3d(0,-5px,0); }
        .dd-box.dos { background: rgba(16, 185, 129, 0.05); border-color: rgba(16, 185, 129, 0.2); }
        .dd-box.dos:hover { border-color: rgba(16, 185, 129, 0.4); box-shadow: 0 10px 30px rgba(16, 185, 129, 0.1); }
        .dd-box.donts { background: rgba(239, 68, 68, 0.05); border-color: rgba(239, 68, 68, 0.2); }
        .dd-box.donts:hover { border-color: rgba(239, 68, 68, 0.4); box-shadow: 0 10px 30px rgba(239, 68, 68, 0.1); }

        /* =========================================
           9. TITAN FUSION CALCULATOR (FROSTED GLASS UX)
           ========================================= */
        .zenith-calc { background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px); border: 1px solid rgba(255, 255, 255, 0.5); border-radius: 40px; overflow: hidden; display: flex; flex-direction: column; box-shadow: 0 40px 100px -30px rgba(0,0,0,0.8); }
        .z-controls { padding: 40px; border-bottom: 1px solid #ccc; position: relative; }
        .z-display { padding: 40px; background: rgba(255, 255, 255, 0.6); display: flex; flex-direction: column; justify-content: space-between; }
        @media (min-width: 900px) { .zenith-calc { display: grid; grid-template-columns: 1.3fr 1fr; } .z-controls { border-right: 1px solid #ccc; border-bottom: none; padding: 60px; } .z-display { padding: 60px; } }
        
        .z-head-title { font-size: 16px; font-weight: 800; color: var(--text-dark); text-transform: uppercase; margin-bottom: 25px; display: flex; align-items: center; gap: 10px; letter-spacing: 1px; }
        .z-head-title::after { content:''; flex:1; height:2px; background: #ccc; }
        
        .ratio-grid { display: flex; gap: 10px; margin-bottom: 20px; }
        .ratio-btn { flex: 1; padding: 14px; border: 1px solid #aaa; border-radius: 12px; font-size: 14px; font-weight: 800; color: #333; background: transparent; transition: all 0.3s; cursor: pointer; text-align: center; }
        .ratio-btn:hover { color: #000; border-color: #000; }
        .ratio-btn.active { border-color: var(--accent); color: #fff; background: var(--accent); box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4); }
        
        .mode-toggle { display: flex; background: #e5e7eb; border-radius: 14px; padding: 5px; border: 1px solid #ccc; }
        .mode-opt { flex: 1; text-align: center; padding: 12px; font-size: 14px; font-weight: 800; color: #333; cursor: pointer; border-radius: 10px; transition: all 0.3s; }
        .mode-opt:hover { color: #000; }
        .mode-opt.active { background: #000; color: #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        
        .unit-wrap { display: flex; gap: 5px; margin-left: auto; background: #e5e7eb; padding: 3px; border-radius: 10px; border: 1px solid #ccc; }
        .unit-btn { padding: 6px 12px; border-radius: 7px; font-size: 13px; font-weight: 800; color: #333; background: transparent; transition: all 0.3s; cursor:pointer; }
        .unit-btn:hover { color: #000; }
        .unit-btn.active { background: #000; color: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        
        .z-group { margin-bottom: 30px; }
        .z-label { font-size: 13px; font-weight: 800; color: #000; text-transform: uppercase; letter-spacing: 1px; }
        .z-head { display: flex; justify-content: space-between; margin-bottom: 15px; align-items: center; }
        
        .z-number { font-family: 'Space Grotesk', sans-serif; font-size: 28px; font-weight: 800; color: #000; background: transparent; border: none; width: 100px; text-align: right; border-bottom: 2px solid #aaa; transition: border-color 0.3s; padding-bottom: 5px; }
        .z-number:focus { border-color: var(--accent); outline: none; }
        
        .z-slider { -webkit-appearance: none; width: 100%; height: 8px; background: #ccc; border-radius: 4px; outline: none; display: block; margin-top: 10px; }
        .z-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 34px; height: 34px; background: #000; border-radius: 50%; cursor: grab; transition: transform 0.2s var(--ease-spring); border: 4px solid #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .z-slider::-webkit-slider-thumb:hover { transform: scale(1.15); }
        
        .shape-grid { display: flex; gap: 15px; margin-bottom: 30px; overflow-x: auto; padding-bottom: 15px; -webkit-overflow-scrolling: touch; scrollbar-width: none; }
        .shape-grid::-webkit-scrollbar { display: none; }
        .shape-btn { min-width: 95px; padding: 20px 15px; border: 2px solid #aaa; border-radius: 16px; display: flex; flex-direction: column; align-items: center; gap: 10px; cursor: pointer; transition: all 0.3s; background: rgba(255, 255, 255, 0.7); }
        .shape-btn:hover { border-color: #555; background: #fff; transform: translate3d(0,-2px,0); }
        .shape-btn.active { background: #fff; border-color: #000; transform: translate3d(0,0,0); box-shadow: 0 6px 15px rgba(0,0,0,0.1); }
        .shape-btn svg { width: 28px; height: 28px; stroke: #333; fill: none; stroke-width: 2.5; transition: stroke 0.3s; }
        .shape-btn.active svg { stroke: #000; }
        .shape-btn span { font-size: 13px; font-weight: 800; color: #333; text-transform: uppercase; transition: color 0.3s; }
        .shape-btn.active span { color: #000; }

        /* SMART SCAN DISPLAY BLOCK IN CALCULATOR */
        .scanned-area-display { display:none; flex-direction:column; align-items:center; margin-bottom:30px; padding:25px; background:rgba(16,185,129,0.1); border:2px dashed var(--success); border-radius:16px; transition: all 0.3s; }
        .scanned-area-display.active { display: flex; animation: popIn 0.4s var(--ease-spring); }
        .scanned-lbl { font-size:12px; font-weight:800; color:var(--success); text-transform:uppercase; letter-spacing:1px; margin-bottom:5px; }
        .scanned-val { font-size:42px; font-weight:800; color:#000; line-height:1; font-family:'Space Grotesk', sans-serif;}
        .scanned-rescan { margin-top:15px; font-size:12px; font-weight:800; color:var(--text-muted); text-transform:uppercase; text-decoration:underline; cursor:pointer; }
        .scanned-rescan:hover { color:#000; }
        
        .preset-row { display: flex; gap: 10px; margin-bottom: 30px; overflow-x: auto; padding-bottom: 10px; scrollbar-width: none; mask-image: linear-gradient(to right, black 90%, transparent 100%); }
        .preset-btn { padding: 12px 24px; border: 2px solid #aaa; border-radius: 30px; font-size: 13px; font-weight: 800; color: #333; background: #fff; white-space: nowrap; transition: all 0.3s; cursor: pointer; }
        .preset-btn:hover { color: #000; border-color: #000; background: #f3f4f6; transform: translate3d(0,-2px,0); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        
        /* Animated Environment Lab Icons */
        .env-icons { display: inline-flex; align-items: center; gap: 10px; margin-left: auto; }
        .icon-temp { width: 18px; height: 18px; stroke: #ef4444; fill: none; animation: tempPulse 2s infinite alternate ease-in-out; }
        .icon-drop { width: 18px; height: 18px; stroke: #3b82f6; fill: none; animation: dropPulse 2s infinite alternate ease-in-out; animation-delay: 1s; }
        @keyframes tempPulse { 0% { transform: scale(1) translateY(0); filter: drop-shadow(0 0 2px rgba(239,68,68,0)); } 100% { transform: scale(1.15) translateY(-2px); filter: drop-shadow(0 0 8px rgba(239,68,68,0.7)); } }
        @keyframes dropPulse { 0% { transform: scale(1) translateY(0); filter: drop-shadow(0 0 2px rgba(59,130,246,0)); } 100% { transform: scale(1.15) translateY(-2px); filter: drop-shadow(0 0 8px rgba(59,130,246,0.7)); } }

        .env-card { background: rgba(16, 185, 129, 0.1); border: 2px solid rgba(16, 185, 129, 0.3); padding: 25px; border-radius: 20px; transition: background-color 0.3s, border-color 0.3s; }
        .auto-btn { width: 100%; padding: 14px; border-radius: 12px; border: 2px solid var(--accent); color: var(--accent); font-size: 13px; font-weight: 800; text-transform: uppercase; cursor: pointer; background: rgba(99,102,241,0.1); margin-bottom: 20px; display: flex; justify-content: center; align-items: center; gap: 8px; transition: all 0.3s; }
        .auto-btn:hover { background: rgba(99,102,241,0.2); transform: translate3d(0,-2px,0); box-shadow: 0 4px 15px rgba(99,102,241,0.2); }
        .auto-btn:active { transform: scale(0.98); }
        
        .refine-toggle { margin-top: 25px; font-size: 13px; font-weight: 800; color: #000; cursor: pointer; display: flex; align-items: center; gap: 8px; padding-top: 20px; border-top: 2px solid #ccc; transition: color 0.3s; }
        .refine-panel { display: none; padding-top: 20px; }
        .refine-panel.show { display: block; animation: slideDown 0.3s var(--ease-fluid) forwards; }
        @keyframes slideDown { from { opacity: 0; transform: translate3d(0,-10px,0); } to { opacity: 1; transform: translate3d(0,0,0); } }
        .refine-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .refine-inp { width: 100%; background: #fff; border: 2px solid #aaa; padding: 12px; border-radius: 10px; color: #000; font-weight: 800; font-size: 14px; outline: none; transition: border-color 0.3s; }
        
        .z-res-title { font-size: 14px; font-weight: 800; text-transform: uppercase; color: #333; letter-spacing: 2px; }
        .z-res-val { font-size: 80px; font-weight: 800; color: #000; line-height: 1; margin: 15px 0 25px; letter-spacing: -3px; }
        .parts-box { display: flex; justify-content: space-between; border-bottom: 2px solid #ccc; padding-bottom: 20px; margin-bottom: 20px; }
        .p-item span { font-size: 13px; font-weight: 800; color: #333; display: block; margin-bottom: 5px; }
        .p-item b { font-size: 28px; color: #000; font-weight: 800; font-variant-numeric: tabular-nums; }
        
        .safety-report { background: rgba(255,255,255,0.8); border-radius: 16px; padding: 20px; border-left: 6px solid #aaa; margin-bottom: 20px; border-top: 1px solid #ccc; border-right: 1px solid #ccc; border-bottom: 1px solid #ccc; }
        .safety-report.safe { border-left-color: var(--success); background: rgba(16,185,129,0.1); border-color: rgba(16,185,129,0.3); }
        .safety-report.danger { border-left-color: var(--danger); background: rgba(239,68,68,0.1); border-color: rgba(239,68,68,0.3); }
        .sr-head { font-size: 14px; font-weight: 800; color: #000; text-transform: uppercase; margin-bottom: 10px; display: flex; justify-content: space-between; }
        .sr-list { list-style: none; padding: 0; margin: 0; }
        .sr-item { font-size: 14px; color: #111; font-weight: 800; margin-bottom: 6px; display: flex; gap: 8px; line-height: 1.4; }
        
        .cost-card { display: flex; justify-content: space-between; align-items: center; background: #fff; padding: 15px; border-radius: 12px; border: 2px solid #ccc; margin-top: auto; }
        .cost-inp { width: 90px; background: transparent; border: none; border-bottom: 2px solid #aaa; color: #000; text-align: right; font-weight: 800; font-size: 20px; padding-bottom: 2px; transition: border-color 0.3s; }

        /* =========================================
           14. SMART CAMERA SCANNER MODAL (ADOBE STYLE CONTOUR)
           ========================================= */
        .scanner-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); z-index: 9999; display: none; justify-content: center; align-items: center; padding: 20px; opacity: 0; transition: opacity 0.4s var(--ease-fluid); }
        .scanner-overlay.active { opacity: 1; display: flex; }
        .scanner-ui { background: #fff; border-radius: 24px; overflow: hidden; width: 100%; max-width: 450px; box-shadow: 0 30px 60px rgba(0,0,0,0.5); display: flex; flex-direction: column; transform: scale(0.95); transition: transform 0.4s var(--ease-spring); }
        .scanner-overlay.active .scanner-ui { transform: scale(1); }
        
        .scanner-header { padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #e5e7eb; background: #fafafa; }
        .scanner-header h3 { font-size: 16px; font-weight: 800; color: #000; margin: 0; display:flex; align-items:center; gap:8px;}
        .scanner-close { background: none; border: none; font-size: 28px; color: #666; cursor: pointer; line-height: 1; padding: 5px; }
        
        .scanner-view { position: relative; width: 100%; height: 400px; background: #000; overflow: hidden; }
        .scanner-view video { width: 100%; height: 100%; object-fit: cover; }
        .scanner-view canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; pointer-events: none; z-index: 5; }
        
        .scan-instruction { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: #fff; padding: 8px 16px; border-radius: 20px; font-size: 12px; font-weight: 800; z-index: 10; text-align: center; white-space: nowrap; }

        .scanner-controls { padding: 25px; background: #fafafa; display: flex; flex-direction: column; align-items: center; gap: 15px; }
        
        .scan-inputs { display: flex; gap: 10px; width: 100%; }
        .scan-inputs input { flex: 1; border: 2px solid #ccc; padding: 14px; font-size: 16px; font-weight: 800; border-radius: 12px; outline: none; background: #fff; color: #000; }
        .scan-inputs select { width: 80px; border: 2px solid #ccc; padding: 14px; font-size: 14px; font-weight: 800; border-radius: 12px; outline: none; background: #fff; color: #000; }
        .scan-inputs input:focus, .scan-inputs select:focus { border-color: var(--success); }

        /* =========================================
           10. FOOTER (MILKY WHITE ANCHOR)
           ========================================= */
        .footer { position: relative; padding: 120px 20px 60px; margin-top: 150px; background: var(--bg-milky); overflow: hidden; border-top: 1px solid var(--border-light); }
        .footer-content { position: relative; z-index: 2; max-width: 1200px; margin: 0 auto; }
        .f-top-grid { display: grid; grid-template-columns: 1.5fr 1fr; gap: 80px; margin-bottom: 100px; }
        .f-vision-title { font-size: 12px; font-weight: 700; color: var(--accent); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 20px; }
        .f-vision-text { font-family: 'Space Grotesk', sans-serif; font-size: clamp(24px, 4vw, 36px); font-weight: 300; color: var(--text-dark); line-height: 1.3; letter-spacing: -0.02em; }
        .f-vision-text span { color: #555; font-weight: 500; }
        .f-founders { margin-top: 40px; display: flex; align-items: center; gap: 20px; }
        .f-signature { font-family: 'Space Grotesk', sans-serif; font-size: 14px; color: var(--text-dark); font-weight: 700; padding-left: 20px; border-left: 1px solid #d1d5db; }
        .f-role { display: block; font-size: 11px; color: var(--text-muted); text-transform: uppercase; margin-top: 4px; letter-spacing: 1px; }
        .f-badges { display: flex; gap: 15px; align-items: flex-start; flex-wrap: wrap; }
        .f-badge { padding: 12px 24px; border: 1px solid #d1d5db; border-radius: 50px; font-size: 12px; color: var(--text-dark); font-weight: 600; letter-spacing: 0.5px; background: var(--bg-pure); transition: transform 0.4s var(--ease-fluid), border-color 0.4s, background-color 0.4s; cursor: default; }
        .f-badge:hover { border-color: var(--text-dark); background: #f3f4f6; transform: translate3d(0,-2px,0); }
        .f-bottom-row { display: flex; justify-content: space-between; align-items: flex-end; padding-top: 40px; border-top: 1px solid var(--border-light); }
        .f-nav { display: flex; gap: 30px; }
        .f-nav-link { font-size: 13px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; font-weight: 700; transition: color 0.3s; }
        .f-nav-link:hover { color: var(--text-dark); }
        .f-copy { font-size: 12px; color: #888; font-weight: 500; }

        /* =========================================
           11. CART & REMINDER HAND 
           ========================================= */
        .cart-fab { position: fixed; bottom: 30px; right: 20px; width: 65px; height: 65px; background: #fff; border-radius: 50%; display: flex; justify-content: center; align-items: center; z-index: 2000; box-shadow: 0 10px 30px rgba(255,255,255,0.2); transition: transform 0.4s var(--ease-fluid), box-shadow 0.4s; cursor: pointer; transform: translate3d(0,0,0); }
        .cart-fab:hover { transform: translate3d(0,-5px,0); box-shadow: 0 15px 40px rgba(255,255,255,0.3); }
        .cart-fab:active { transform: scale(0.9) translate3d(0,0,0); }
        .cart-count { position: absolute; top: -2px; right: -2px; background: #000; color: #fff; font-size: 11px; width: 24px; height: 24px; border-radius: 50%; display: flex; justify-content: center; align-items: center; border: 2px solid #fff; font-weight: 800; transition: transform 0.4s var(--ease-spring); }
        
        .cart-reminder { position: fixed; bottom: 100px; right: 32px; font-size: 35px; z-index: 1999; opacity: 0; pointer-events: none; transform: translate3d(0, 20px, 0); transition: transform 0.5s var(--ease-spring), opacity 0.5s; animation: bounceHand 1s infinite alternate; filter: drop-shadow(0 4px 10px rgba(0,0,0,0.5)); }
        .cart-reminder.show { opacity: 1; transform: translate3d(0, 0, 0); }
        @keyframes bounceHand { 0% { transform: translate3d(0,0,0) rotate(0deg); } 100% { transform: translate3d(0,15px,0) rotate(-10deg); } }

        .cart-sidebar { position: fixed; top: 0; right: 0; width: 100%; height: 100vh; z-index: 3000; pointer-events: none; }
        .cart-overlay { position: absolute; width: 100%; height: 100%; background: rgba(0,0,0,0.8); opacity: 0; transition: opacity 0.5s var(--ease-fluid); cursor: pointer; }
        .cart-inner { position: absolute; right: 0; width: 100%; max-width: 420px; height: 100%; background: #050505; border-left: 1px solid var(--border); transform: translate3d(100%, 0, 0); transition: transform 0.6s var(--ease-fluid); display: flex; flex-direction: column; padding: 40px; box-shadow: -20px 0 50px rgba(0,0,0,0.5); }
        
        .cart-sidebar.active { pointer-events: all; }
        .cart-sidebar.active .cart-overlay { opacity: 1; }
        .cart-sidebar.active .cart-inner { transform: translate3d(0, 0, 0); }
        
        .cart-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; border-bottom: 1px solid var(--border); padding-bottom: 20px; }
        .cart-item { background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 16px; padding: 15px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; animation: slideInRight 0.4s var(--ease-spring) forwards; }
        @keyframes slideInRight { from { opacity: 0; transform: translate3d(30px,0,0); } to { opacity: 1; transform: translate3d(0,0,0); } }
        .c-info h4 { font-size: 14px; color: #fff; font-weight: 700; margin-bottom: 4px; }
        .c-info p { font-size: 12px; color: var(--text-dim); }
        .c-actions { display: flex; flex-direction: column; align-items: flex-end; gap: 8px; }
        .c-price { font-weight: 700; color: #fff; font-size: 14px; }
        .qty-control { display: flex; align-items: center; background: #000; border: 1px solid var(--border); border-radius: 20px; overflow: hidden; }
        .qty-btn { width: 34px; height: 34px; display: flex; justify-content: center; align-items: center; color: #fff; font-size: 14px; font-weight: 800; cursor: pointer; transition: background 0.2s; }
        .qty-btn:hover { background: rgba(255,255,255,0.15); }
        .qty-btn:active { background: rgba(255,255,255,0.3); }
        .qty-val { width: 24px; text-align: center; font-size: 12px; font-weight: 800; color: #fff; }
        
        .checkout-btn { width: 100%; padding: 16px; border-radius: 12px; font-weight: 800; text-transform: uppercase; font-size: 13px; letter-spacing: 1px; transition: transform 0.4s var(--ease-fluid), box-shadow 0.4s; display: flex; justify-content: center; align-items: center; gap: 10px; cursor: pointer; border: none; }
        .checkout-btn:hover { transform: translate3d(0,-2px,0); box-shadow: 0 10px 25px rgba(37, 211, 102, 0.3); }
        .empty-cart { text-align: center; color: var(--text-dim); margin-top: 50px; font-size: 14px; }

        /* =========================================
           12. VIJETA AI ASSISTANT
           ========================================= */
        .vijeta-fab { position: fixed; bottom: 30px; left: 20px; width: 65px; height: 65px; background: #000; border: 2px solid var(--accent); border-radius: 50%; z-index: 2000; box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4); transition: transform 0.4s var(--ease-fluid), box-shadow 0.4s; cursor: pointer; padding: 2px; transform: translate3d(0,0,0); }
        .vijeta-fab:hover { transform: translate3d(0,-5px,0) scale(1.05); box-shadow: 0 15px 40px rgba(99, 102, 241, 0.6); }
        .v-avatar { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
        .v-online-dot { position: absolute; bottom: 2px; right: 2px; width: 14px; height: 14px; background: var(--success); border-radius: 50%; border: 2px solid #000; box-shadow: 0 0 10px var(--success); }
        
        .v-greeting { position: fixed; bottom: 105px; left: 20px; width: 250px; background: rgba(20, 20, 20, 0.95); border: 1px solid var(--accent); border-radius: 16px 16px 16px 4px; padding: 15px; color: #fff; font-size: 13px; line-height: 1.5; z-index: 1999; opacity: 0; transform: translate3d(0, 20px, 0) scale(0.9); transition: opacity 0.5s var(--ease-spring), transform 0.5s var(--ease-spring); box-shadow: 0 10px 30px rgba(0,0,0,0.5); pointer-events: none; }
        .v-greeting.show { opacity: 1; transform: translate3d(0, 0, 0) scale(1); }

        .vijeta-panel { position: fixed; bottom: 105px; left: 20px; width: 380px; height: 550px; background: #0a0a0a; border: 1px solid var(--border); border-radius: 24px; z-index: 2001; display: flex; flex-direction: column; overflow: hidden; opacity: 0; transform: translate3d(0, 20px, 0) scale(0.95); pointer-events: none; transition: transform 0.5s var(--ease-spring), opacity 0.5s; box-shadow: 0 20px 60px rgba(0,0,0,0.8); }
        .vijeta-panel.active { opacity: 1; transform: translate3d(0, 0, 0) scale(1); pointer-events: all; }
        
        .v-header { background: rgba(99, 102, 241, 0.1); border-bottom: 1px solid var(--border); padding: 20px; display: flex; justify-content: space-between; align-items: center; }
        .v-title { display: flex; align-items: center; gap: 10px; font-size: 15px; font-weight: 800; color: #fff; letter-spacing: 0.5px; }
        .v-title span { display: block; width: 8px; height: 8px; background: var(--success); border-radius: 50%; box-shadow: 0 0 10px var(--success); }
        .v-close { background: none; border: none; color: var(--text-dim); font-size: 24px; cursor: pointer; transition: color 0.3s, transform 0.3s; line-height: 1; }
        
        .v-chat { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; scrollbar-width: none; overscroll-behavior: contain; }
        .v-chat::-webkit-scrollbar { display: none; }
        .msg { max-width: 88%; padding: 14px 18px; border-radius: 16px; font-size: 13px; line-height: 1.6; animation: popIn 0.3s var(--ease-spring) forwards; }
        @keyframes popIn { from { opacity: 0; transform: translate3d(0,10px,0); } to { opacity: 1; transform: translate3d(0,0,0); } }
        .msg.bot { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; align-self: flex-start; border-bottom-left-radius: 4px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .msg.user { background: var(--accent); color: #fff; align-self: flex-end; border-bottom-right-radius: 4px; box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3); }
        
        .v-options { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; animation: popIn 0.4s var(--ease-spring) forwards; }
        .v-opt-btn { background: rgba(99, 102, 241, 0.1); border: 1px solid var(--accent); color: #fff; padding: 10px 16px; border-radius: 20px; font-size: 12px; font-family: 'Manrope', sans-serif; font-weight: 600; cursor: pointer; transition: transform 0.3s var(--ease-spring), background-color 0.3s; }
        
        .v-input-area { padding: 15px; border-top: 1px solid var(--border); display: flex; gap: 10px; background: #050505; }
        .v-input { flex: 1; background: rgba(255,255,255,0.05); border: 1px solid transparent; border-radius: 20px; padding: 12px 18px; color: #fff; font-size: 13px; outline: none; }
        .v-input:focus { border-color: var(--accent); background: #000; }
        .v-send { background: var(--accent); border: none; width: 42px; height: 42px; border-radius: 50%; display: flex; justify-content: center; align-items: center; color: #fff; cursor: pointer; transition: transform 0.3s var(--ease-spring), box-shadow 0.3s; }

        /* =========================================
           13. MOBILE OPTIMIZATIONS
           ========================================= */
        @media (max-width: 900px) {
            .bg-layer { background-size: cover; opacity: 0.85; background-attachment: scroll; background-position: center center; }
            :root { --blur: blur(0px); } 
            .glass, .comp-container, .comp-wrapper { backdrop-filter: none !important; -webkit-backdrop-filter: none !important; background: #0a0a0a !important; box-shadow: none !important; }
            
            .hero { min-height: 80dvh; }
            .grid-3 { grid-template-columns: 100%; } 
            .specs-layout, .gallery-masonry, .zenith-calc, .dos-donts, .refine-grid { grid-template-columns: 1fr; }
            .gallery-masonry { column-count: 2; column-gap: 10px; }
            .cart-inner { width: 100%; max-width: 100%; padding: 25px; }
            .z-controls, .z-display { padding: 30px; }
            .hero h1 { font-size: 48px; }
            .nav-inner { justify-content: flex-start; gap: 20px; }
            .nav-links { gap: 25px; }
            .shape-btn { min-width: 85px; }
            .z-res-val { font-size: 56px; }
            .section { padding: 80px 0; }
            .f-top-grid { grid-template-columns: 1fr; gap: 50px; }
            .f-bottom-row { flex-direction: column; align-items: flex-start; gap: 20px; }
            .comp-container { padding: 15px; border-radius: 16px; width: 100%; overflow: hidden; }
            .comp-wrapper { margin: 0; width: 100%; border-radius: 12px; border: 1px solid var(--border); background: #0a0a0a; }
            .comp-table { width: 100%; table-layout: fixed; min-width: auto; }
            .comp-cell, .comp-table th { white-space: normal; font-size: 10px; padding: 10px 4px; line-height: 1.3; word-wrap: break-word; }
            .comp-table th:nth-child(1) { width: 20%; } 
            .comp-table th:nth-child(2) { width: 45%; } 
            .comp-table th:nth-child(3) { width: 35%; } 
            .comp-container::after { display: none; }
            
            .vijeta-panel { width: calc(100% - 40px); left: 20px; right: 20px; height: 500px; bottom: 105px; backdrop-filter: none !important; background: #0a0a0a !important; }
            .v-greeting { width: calc(100% - 110px); }
            
            .premium-stamp { top: 12%; right: 5%; width: 100px; height: 100px; }
            
            #hardness-popup { right: -10px; max-width: 170px; font-size: 9px; }
            #hardness-popup::after { right: 20px; }
            
            /* MOBILE SCANNER FIX */
            .scanner-ui { max-width: 95%; }
        }
    </style>
</head>
<body>

    <div id="smart-scanner" class="scanner-overlay">
        <div class="scanner-ui">
            <div class="scanner-header">
                <h3>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2.5" style="margin-right:8px;"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>
                    AI Edge Scanner
                </h3>
                <button class="scanner-close" onclick="closeScanner()">×</button>
            </div>
            
            <div class="scanner-view">
                <video id="camera-feed" autoplay playsinline></video>
                <canvas id="scanner-canvas"></canvas>
                <div class="scan-instruction" id="scan-instruction">Center mould & hold steady</div>
            </div>
            
            <div class="scanner-controls">
                <button id="btn-capture" class="btn btn-primary" style="width:100%; background:#111; color:#fff; font-size:14px; padding: 20px;" onclick="captureScanFrame()">Scan Contour</button>
                
                <div id="scan-prompt" style="display:none; width:100%;">
                    <p style="font-size:13px; font-weight:800; margin-bottom:15px; color:#000; line-height:1.5;">
                        <span style="color:var(--success);">✓ Perfect contour isolated.</span><br>
                        Enter the exact length of the <span style="color:#ef4444; text-decoration: underline;">RED CALIBRATION LINE</span>:
                    </p>
                    <div class="scan-inputs">
                        <input type="number" id="scan-line-length" placeholder="Line Length">
                        <select id="scan-unit">
                            <option value="cm">cm</option>
                            <option value="mm">mm</option>
                            <option value="in">inch</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" style="background:var(--accent); color:#fff; border:none; width:100%; margin-top:10px; font-size: 14px;" onclick="processCalibration()">Calculate Area</button>
                </div>
            </div>
        </div>
    </div>

    <div class="bg-layer"></div>
    <div class="bg-gradient"></div>
    
    <div id="toast" class="toast">Added to Cart</div>

    <nav class="navbar">
        <div class="container nav-inner">
            
            <div class="logo-wrapper">
                <a href="#" class="logo" id="mx-logo" style="padding-right: 2px;">M-X LUME<span id="resin-s">S</span></a>
                
                <div class="animal-wrapper" id="animal-container">
                    <div id="hardness-popup">Ouch it hurts, because it is made up of rock solid 85 Shore D resin material</div>
                    
                    <svg id="animal-svg" viewBox="0 0 100 100" style="width: 100%; height: 100%; overflow: visible; opacity: 0;">
                        <path id="leg-bl" d="M75,45 L65,90 L70,90 L80,45 Z" fill="#444" style="transform-origin: 75px 45px;"/>
                        <path id="leg-fl" d="M35,48 L25,90 L30,90 L40,48 Z" fill="#444" style="transform-origin: 35px 48px;"/>
                        
                        <path id="torso" d="M15,20 L25,10 L35,15 L30,35 L40,45 L80,45 L90,35 L85,55 L75,60 L35,60 L20,40 Z" fill="#111"/>
                        
                        <path d="M20,15 L10,-5 M15,5 L25,-2 M12,0 L5,2" stroke="#111" stroke-width="2" fill="none" stroke-linecap="round"/>
                        
                        <path id="leg-br" d="M80,45 L75,95 L80,95 L85,45 Z" fill="#111" style="transform-origin: 80px 45px;"/>
                        <path id="leg-fr" d="M40,48 L35,95 L40,95 L45,48 Z" fill="#111" style="transform-origin: 40px 48px;"/>
                    </svg>
                </div>
            </div>

            <div class="nav-links">
                <a href="#shop" class="nav-link" style="color: var(--accent); border-bottom: 2px solid var(--accent);">Order Now</a>
                <a href="#shop" class="nav-link">Lineup</a>
                <a href="#specs" class="nav-link">Specs</a>
                <a href="#calc" class="nav-link">Calc</a>
            </div>
        </div>
    </nav>

    <header class="hero">
        <div class="premium-stamp">
            <svg viewBox="0 0 100 100" style="width: 100%; height: 100%; overflow: visible;">
                <path id="stamp-curve" d="M 50, 50 m -35, 0 a 35,35 0 1,1 70,0 a 35,35 0 1,1 -70,0" fill="none" />
                <text font-size="11" font-weight="800" fill="#ef4444" letter-spacing="3" font-family="'Space Grotesk', sans-serif">
                    <textPath href="#stamp-curve" startOffset="0%" textLength="219">PREMIUM PRODUCT ✦ PREMIUM PRODUCT ✦ </textPath>
                </text>
            </svg>
        </div>

        <div class="reveal active">
            <h1>Molecular Clarity.<br>OLED Contrast.</h1>
            <p>The definitive 3:1 epoxy system. Engineered for professional artisans.</p>
            <div style="margin-top:40px; display:flex; gap:15px; justify-content:center;">
                <button class="btn btn-primary" onclick="smoothScroll('shop')">Start Your Order</button>
                <button class="btn btn-outline" onclick="smoothScroll('calc')">Calculator</button>
            </div>
        </div>
        <div class="marquee">
            <div class="marquee-content">
                <span class="marquee-item"><span>✦</span> ISO 9001</span>
                <span class="marquee-item"><span>✦</span> Zero VOC</span>
                <span class="marquee-item"><span>✦</span> 85 Shore D</span>
                <span class="marquee-item"><span>✦</span> 120m Pot Life</span>
                <span class="marquee-item"><span>✦</span> ISO 9001</span>
                <span class="marquee-item"><span>✦</span> Zero VOC</span>
            </div>
        </div>
    </header>

    <section id="shop" class="section" style="padding-top: 40px;">
        <div class="container">
            <h2 style="text-align:center; font-size:42px; margin-bottom:80px;">Studio Lineup</h2>
            <div class="grid-3">
                
                <div class="product-card reveal">
                    <div>
                        <span class="p-tag">Starter Kit</span>
                        <img src="product-1.webp" alt="1.2 KG Kit" class="p-img" loading="lazy" decoding="async">
                        <h3>1.2 KG Master Kit</h3>
                        <p style="color:var(--text-dim); font-size:14px; margin-top:5px;">900g Resin + 300g Hardener.</p>
                        <div style="display:flex; align-items:center; margin-top:10px; color:var(--success); font-size:11px; font-weight:700; letter-spacing:1px;"><span style="margin-right:5px;">🚚</span> No Extra Shipping Charges</div>
                    </div>
                    <div style="margin-top:20px;">
                        <div style="display:flex; align-items:baseline; gap:10px; margin-bottom:15px;">
                            <div style="font-size:24px; font-weight:700;">₹1,250</div>
                            <div style="font-size:16px; text-decoration:line-through; color:var(--text-dim);">₹1,450</div>
                        </div>
                        <button class="btn btn-primary" style="width:100%;" onclick="addToCart('1.2 KG Master Kit', 1250)">Add to Cart</button>
                    </div>
                </div>

                <div class="product-card reveal" style="border-color:rgba(255,255,255,0.4) !important;">
                    <div>
                        <span class="p-tag" style="background:#fff; color:#000; border-color:#fff;">Best Seller</span>
                        <img src="MX_LUMES_4_8kg_Master_Kit.png" alt="4.8 KG Kit" class="p-img" loading="lazy" decoding="async">
                        <h3>4.8 KG Master Kit</h3>
                        <p style="color:var(--text-dim); font-size:14px; margin-top:5px;">3.6kg Resin + 1.2kg Hardener.</p>
                        <div style="display:flex; align-items:center; margin-top:10px; color:var(--success); font-size:11px; font-weight:700; letter-spacing:1px;"><span style="margin-right:5px;">🚚</span> No Extra Shipping Charges</div>
                    </div>
                    <div style="margin-top:20px;">
                        <div style="display:flex; align-items:baseline; gap:10px; margin-bottom:15px;">
                            <div style="font-size:24px; font-weight:700;">₹4,400</div>
                            <div style="font-size:16px; text-decoration:line-through; color:var(--text-dim);">₹5,000</div>
                        </div>
                        <button class="btn btn-primary" style="width:100%;" onclick="addToCart('4.8 KG Master Kit', 4400)">Add to Cart</button>
                    </div>
                </div>

                <div class="product-card reveal" style="position:relative; overflow:hidden;">
                    <div style="position:absolute; top:20px; right:-30px; background:var(--accent); padding:5px 30px; transform:rotate(45deg); font-size:9px; font-weight:800; text-transform:uppercase; letter-spacing:1px; z-index:2;">Super Saver</div>
                    <div>
                        <span class="p-tag" style="color:var(--accent); border-color:var(--accent);">Monthly Pack</span>
                        <img src="MX_LUMES_20kg_Set_15kg_Resin_5kg_Hardener.png" alt="20 KG Set" class="p-img" loading="lazy" decoding="async">
                        <h3>20 KG Studio Set</h3>
                        <p style="color:var(--text-dim); font-size:14px; margin-top:5px;">15kg Resin + 5kg Hardener.</p>
                        <div style="margin-top:10px; font-size:12px; font-weight:700; color:#fff;">Only <span style="color:var(--accent);">₹850/kg</span> for premium quality.</div>
                    </div>
                    <div style="margin-top:20px;">
                        <div style="display:flex; align-items:baseline; gap:10px; margin-bottom:15px;">
                            <div style="font-size:24px; font-weight:700;">₹17,000</div>
                            <div style="font-size:16px; text-decoration:line-through; color:var(--text-dim);">₹25,000</div>
                        </div>
                        <button class="btn btn-primary" style="width:100%;" onclick="addToCart('20 KG Studio Set', 17000)">Add to Cart</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="support" class="section" style="padding-top: 20px;">
        <div class="container">
            <div class="glass support-card reveal">
                <div style="font-size: 40px; margin-bottom: 15px;">💬</div>
                <h2 style="font-size: 28px; margin-bottom: 10px;">24/7 Expert Artist Support</h2>
                <p style="color:var(--text-dim); max-width: 600px; margin: 0 auto 30px; font-size: 15px; line-height: 1.6;">
                    Have questions about pricing, bulk availability, or quality? Or are you an existing M-X Lumes artist facing issues with mixing, pouring, or curing? Our team of resin experts is available round the clock.
                </p>
                <a href="https://wa.me/917668077298?text=Hi%20M-X%20Lumes!%20I%20have%20a%20query%20regarding%20your%20resin%20products." target="_blank" rel="noopener noreferrer" class="btn btn-primary" style="background: var(--whatsapp); color: #000; font-size: 13px; padding: 18px 36px;">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24" style="margin-right: 8px;"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.463 1.065 2.876 1.213 3.074.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
                    Chat with an Expert
                </a>
            </div>
        </div>
    </section>

    <section id="technology" class="section">
        <div class="container">
            <h2 style="text-align:center; font-size:36px; margin-bottom:60px;">The Engineering</h2>
            <div class="grid-3">
                <div class="glass tech-card reveal">
                    <div class="tech-icon">🛡️</div>
                    <div class="tech-sub">Archival Grade</div>
                    <h3>HALS Technology</h3>
                    <p style="color:var(--text-dim); font-size:14px; margin-top:10px;">Hindered Amine Light Stabilizers actively scavenge free radicals generated by UV exposure, interrupting the degradation cycle before yellowing begins.</p>
                </div>
                <div class="glass tech-card reveal">
                    <div class="tech-icon">🫧</div>
                    <div class="tech-sub">Fluid Dynamics</div>
                    <h3>Zero-Bubble Matrix</h3>
                    <p style="color:var(--text-dim); font-size:14px; margin-top:10px;">Formulated with proprietary de-foaming agents that lower surface tension to 28 dynes/cm, forcing micro-bubbles to rise instantly.</p>
                </div>
                <div class="glass tech-card reveal">
                    <div class="tech-icon">⏳</div>
                    <div class="tech-sub">Reaction Kinetic</div>
                    <h3>The Golden Ratio</h3>
                    <p style="color:var(--text-dim); font-size:14px; margin-top:10px;">We hit the chemical jackpot: Ultra-thin flow for detail, but chemically retarded cure for stress-free working time.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="specs" class="section">
        <div class="container">
            <div class="reveal">
                <div class="specs-header">
                    <h2>The Specification</h2>
                    <p>Why professionals switch to M-X Lumes</p>
                </div>
                
                <div class="comp-wrapper">
                    <div class="comp-container">
                        <table class="comp-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th class="col-mx">M-X Lumes (Crystal Series)</th>
                                    <th>Generic Epoxy</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="comp-row">
                                    <td class="comp-cell dim">Optical Clarity</td>
                                    <td class="comp-cell bright col-mx"><span>✦</span> Diamond Clear (RI 1.56)</td>
                                    <td class="comp-cell dim">Slight Haze / Blue Tint</td>
                                </tr>
                                <tr class="comp-row">
                                    <td class="comp-cell dim">Bubble Release</td>
                                    <td class="comp-cell bright col-mx"><span>✦</span> Auto-Degassing</td>
                                    <td class="comp-cell dim">Requires Vacuum Chamber</td>
                                </tr>
                                <tr class="comp-row">
                                    <td class="comp-cell dim">UV Resistance</td>
                                    <td class="comp-cell bright col-mx"><span>✦</span> HALS + UV Absorbers</td>
                                    <td class="comp-cell dim">Yellows after 6 months</td>
                                </tr>
                                <tr class="comp-row">
                                    <td class="comp-cell dim">Hardness</td>
                                    <td class="comp-cell bright col-mx"><span>✦</span> 85 Shore D (Rock Hard)</td>
                                    <td class="comp-cell dim">70-75 Shore D (Soft)</td>
                                </tr>
                                <tr class="comp-row">
                                    <td class="comp-cell dim">Heat Deflection</td>
                                    <td class="comp-cell bright col-mx"><span>✦</span> 85°C (Coaster Safe)</td>
                                    <td class="comp-cell dim">50°C (Softens w/ mugs)</td>
                                </tr>
                                <tr class="comp-row">
                                    <td class="comp-cell dim">Safety</td>
                                    <td class="comp-cell bright col-mx"><span>✦</span> Zero VOC, BPA-Free</td>
                                    <td class="comp-cell dim">High Fumes / Odor</td>
                                </tr>
                                <tr class="comp-row">
                                    <td class="comp-cell dim">Cure Time</td>
                                    <td class="comp-cell bright col-mx"><span>✦</span> 24 Hours (Demold)</td>
                                    <td class="comp-cell dim">48+ Hours</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div class="comp-footer">
                            <a href="tds.pdf" class="btn btn-outline" download>Download TDS</a>
                            <a href="sds.pdf" class="btn btn-outline" download>Download SDS</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="calc" class="section reveal">
        <div class="container">
            <h2 style="text-align:center; margin-bottom:50px;">Project Calculator</h2>
            
            <div class="zenith-calc">
                <div class="z-controls">
                    <div class="z-head-title">1. Resin Setup <div class="unit-wrap"><button class="unit-btn active" id="unit-cm" onclick="setUnit('cm')">CM</button><button class="unit-btn" id="unit-in" onclick="setUnit('in')">IN</button></div></div>
                    
                    <div class="z-group">
                        <div class="z-label">Mixing Ratio</div>
                        <div class="ratio-grid">
                            <button class="ratio-btn active" onclick="setRatio(3,1, this)">3:1</button>
                            <button class="ratio-btn" onclick="setRatio(2,1, this)">2:1</button>
                            <button class="ratio-btn" onclick="setRatio(1,1, this)">1:1</button>
                            <button class="ratio-btn" onclick="toggleCustomRatio(this)">Custom</button>
                        </div>
                        <div id="custom-ratio" style="display:none; gap:10px; margin-bottom:15px;">
                            <input type="number" id="ratioA" class="z-number" value="3" style="width:100%;" oninput="runCalc()">
                            <input type="number" id="ratioB" class="z-number" value="1" style="width:100%;" oninput="runCalc()">
                        </div>
                        <div class="mode-toggle">
                            <div class="mode-opt active" id="mode-cast" onclick="setMode('cast')">Casting (Deep)</div>
                            <div class="mode-opt" id="mode-coat" onclick="setMode('coat')">Coating (Thin)</div>
                        </div>
                    </div>

                    <div class="z-head-title">2. Dimensions</div>
                    <div class="shape-grid">
                        <div class="shape-btn active" id="btn-rect" onclick="setShape('rect')"><svg viewBox="0 0 24 24"><rect x="3" y="5" width="18" height="14" rx="2"/></svg><span>Square</span></div>
                        <div class="shape-btn" id="btn-circ" onclick="setShape('circ')"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/></svg><span>Circle</span></div>
                        <div class="shape-btn" id="btn-tri" onclick="setShape('tri')"><svg viewBox="0 0 24 24"><path d="M12 2L2 22h20L12 2z"/></svg><span>Triangle</span></div>
                        <div class="shape-btn" id="btn-pyr" onclick="setShape('pyr')"><svg viewBox="0 0 24 24"><path d="M12 2L2 22h20L12 2z" fill="none" stroke="currentColor"/><path d="M12 2v20"/></svg><span>Pyramid</span></div>
                        <div class="shape-btn" id="btn-sph" onclick="setShape('sph')"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/></svg><span>Orb</span></div>
                        
                        <div class="shape-btn" id="btn-scan" onclick="openScanner()" style="border-color: var(--accent); background: rgba(99,102,241,0.05);">
                            <svg viewBox="0 0 24 24" stroke="var(--accent)"><path d="M3 3h6v2H5v4H3V3zm18 0h-6v2h4v4h2V3zM3 21h6v-2H5v-4H3v6zm18 0h-6v-2h4v-4h2v6z" fill="currentColor"/><circle cx="12" cy="12" r="3" fill="currentColor"/></svg>
                            <span style="color: var(--accent);">Smart Scan</span>
                        </div>
                    </div>

                    <div class="preset-row">
                        <button class="preset-btn" onclick="setPreset('varmala')">Varmala</button>
                        <button class="preset-btn" onclick="setPreset('clock')">Clock</button>
                        <button class="preset-btn" onclick="setPreset('geode')">Geode</button>
                        <button class="preset-btn" onclick="setPreset('tray')">Tray</button>
                    </div>

                    <div id="dims-rect">
                        <div class="z-group"><div class="z-head"><span class="z-label">Length</span><input type="number" id="input-L" class="z-number" value="0" oninput="sync('L')"></div><input type="range" class="z-slider" id="slider-L" min="0" max="200" value="0" oninput="sync('L', true)"></div>
                        <div class="z-group"><div class="z-head"><span class="z-label">Width</span><input type="number" id="input-W" class="z-number" value="0" oninput="sync('W')"></div><input type="range" class="z-slider" id="slider-W" min="0" max="100" value="0" oninput="sync('W', true)"></div>
                    </div>
                    <div id="dims-circ" style="display:none;">
                        <div class="z-group"><div class="z-head"><span class="z-label">Diameter</span><input type="number" id="input-Dia" class="z-number" value="0" oninput="sync('Dia')"></div><input type="range" class="z-slider" id="slider-Dia" min="0" max="100" value="0" oninput="sync('Dia', true)"></div>
                    </div>
                    <div id="dims-tri" style="display:none;">
                        <div class="z-group"><div class="z-head"><span class="z-label">Base</span><input type="number" id="input-TB" class="z-number" value="0" oninput="sync('TB')"></div><input type="range" class="z-slider" id="slider-TB" min="0" max="200" value="0" oninput="sync('TB', true)"></div>
                        <div class="z-group"><div class="z-head"><span class="z-label">Height (Triangle)</span><input type="number" id="input-TH" class="z-number" value="0" oninput="sync('TH')"></div><input type="range" class="z-slider" id="slider-TH" min="0" max="100" value="0" oninput="sync('TH', true)"></div>
                    </div>
                    <div id="dims-pyr" style="display:none;">
                         <div class="z-group"><div class="z-head"><span class="z-label">Base Width</span><input type="number" id="input-PB" class="z-number" value="0" oninput="sync('PB')"></div><input type="range" class="z-slider" id="slider-PB" min="0" max="100" value="0" oninput="sync('PB', true)"></div>
                         <div class="z-group"><div class="z-head"><span class="z-label">Pyramid Height</span><input type="number" id="input-PH" class="z-number" value="0" oninput="sync('PH')"></div><input type="range" class="z-slider" id="slider-PH" min="0" max="100" value="0" oninput="sync('PH', true)"></div>
                    </div>
                    <div id="dims-sph" style="display:none;">
                        <div class="z-group"><div class="z-head"><span class="z-label">Diameter</span><input type="number" id="input-SD" class="z-number" value="0" oninput="sync('SD')"></div><input type="range" class="z-slider" id="slider-SD" min="0" max="100" value="0" oninput="sync('SD', true)"></div>
                    </div>
                    
                    <div id="dims-scan" class="scanned-area-display">
                        <div class="scanned-lbl">✓ AI Scanned Irregular Area</div>
                        <div id="scan-area-display" class="scanned-val">0 cm²</div>
                        <div class="scanned-rescan" onclick="openScanner()">Rescan Mould</div>
                    </div>

                    <div class="z-group" id="group-depth"><div class="z-head"><span class="z-label">Depth (Thickness)</span><input type="number" id="input-D" class="z-number" value="1" oninput="sync('D')"></div><input type="range" class="z-slider" id="slider-D" min="0.1" max="15" step="0.1" value="1" oninput="sync('D', true)"></div>

                    <div class="z-head-title" style="margin-top:40px;">
                        3. Environment Lab
                        <div class="env-icons">
                            <svg class="icon-temp" viewBox="0 0 24 24"><path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            <svg class="icon-drop" viewBox="0 0 24 24"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        </div>
                    </div>
                    <div class="env-card" id="env-card">
                        <button class="auto-btn" onclick="autoDetectWeather()"><svg viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>Auto-Detect Conditions</button>
                        <div id="weather-status" style="font-size:11px; text-align:center; color:var(--text-muted); margin-bottom:15px; display:none;">Searching for satellites...</div>
                        <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px;">
                            <div><div class="z-label">Est. Indoor Temp</div><input type="range" class="z-slider" id="env-temp" min="5" max="50" value="25" oninput="runCalc(); document.getElementById('val-temp').innerText=this.value+'°C'"><div id="val-temp" style="font-size:14px; font-weight:800; text-align:right; margin-top:5px; color:var(--text-dark);">25°C</div></div>
                            <div><div class="z-label">Est. Indoor RH</div><input type="range" class="z-slider" id="env-hum" min="20" max="90" value="50" oninput="runCalc(); document.getElementById('val-hum').innerText=this.value+'%'"><div id="val-hum" style="font-size:14px; font-weight:800; text-align:right; margin-top:5px; color:var(--text-dark);">50%</div></div>
                        </div>
                        <div id="weather-intelligence"></div>
                    </div>

                    <div class="refine-toggle" onclick="document.getElementById('refine-panel').classList.toggle('show')"><span>⚙️ Advanced Settings</span></div>
                    <div id="refine-panel" class="refine-panel">
                        <div class="refine-grid">
                            <div><div class="z-label">Density</div><select id="densitySelect" onchange="runCalc()" class="refine-inp"><option value="1.13">Standard (1.13)</option><option value="1.05">Low Visc (1.05)</option></select></div>
                            <div><div class="z-label">Pigment %</div><input type="number" id="pigment" class="refine-inp" value="0" oninput="runCalc()"></div>
                        </div>
                    </div>
                </div>

                <div class="z-display">
                    <div>
                        <div class="z-res-title">TOTAL WEIGHT</div>
                        <div class="z-res-val" id="res-total">0g</div>
                        <div class="parts-box">
                            <div class="p-item"><span>RESIN (A)</span><b id="res-a">0g</b></div>
                            <div class="p-item"><span>HARDENER (B)</span><b id="res-b">0g</b></div>
                        </div>
                    </div>

                    <div class="safety-report" id="safety-card">
                        <div class="sr-head"><span>Safety Report</span><span id="safety-status" style="color:var(--success);">SAFE</span></div>
                        <ul class="sr-list" id="safety-list">
                            <li class="sr-item"><span>✓</span> Conditions are optimal.</li>
                        </ul>
                    </div>

                    <div class="cost-card">
                        <div><div class="z-label" style="margin:0;">Cost (₹/kg)</div><input type="number" id="costInput" class="cost-inp" placeholder="1000" oninput="runCalc()"></div>
                        <div style="font-size:20px; font-weight:800; color: var(--text-dark);" id="est-cost">₹0</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="gallery" class="section reveal">
        <div class="container">
            <h2 style="text-align:center; margin-bottom:50px;">Gallery</h2>
            <div class="gallery-masonry">
                <div class="g-item"><img src="at3.png" class="g-img" loading="lazy" decoding="async"></div>
                <div class="g-item"><img src="at1.png" class="g-img" loading="lazy" decoding="async"></div>
                <div class="g-item"><img src="at2.png" class="g-img" loading="lazy" decoding="async"></div>
                <div class="g-item"><img src="at4.png" class="g-img" loading="lazy" decoding="async"></div>
                <div class="g-item"><img src="at5.png" class="g-img" loading="lazy" decoding="async"></div>
                <div class="g-item"><img src="at4.png" class="g-img" loading="lazy" decoding="async" style="filter:hue-rotate(45deg);"></div>
            </div>
            <div class="dos-donts" style="margin-top:60px;">
                <div class="dd-box dos"><h3 style="color:var(--success); margin-bottom:20px;">✓ The Dos</h3><ul style="color:var(--text-dim); list-style:disc; padding-left:20px;"><li>Wear gloves and mask.</li><li>Work at 25°C.</li><li>Seal porous surfaces.</li></ul></div>
                <div class="dd-box donts"><h3 style="color:var(--danger); margin-bottom:20px;">✕ The Don'ts</h3><ul style="color:var(--text-dim); list-style:disc; padding-left:20px;"><li>Don't mix by volume.</li><li>Don't scrape cup on pour.</li><li>Avoid water contact.</li></ul></div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="footer-overlay"></div>
        <div class="footer-watermark" style="opacity: 0.05;">M-X</div>
        
        <div class="footer-content">
            <div class="f-top-grid">
                <div>
                    <div class="f-vision-title">The Vision</div>
                    <div class="f-vision-text">
                        "We refused to accept that Indian artists deserved anything less than the <span style="font-weight: 800; color: #000;">world's best</span>. Bridging the gap between foreign precision and Indian artistry."
                    </div>
                    <div class="f-founders">
                        <div>
                            <div class="f-signature">Mukul Saharawat</div>
                            <span class="f-role">Founder</span>
                        </div>
                        <div>
                            <div class="f-signature">Mahima Pandey</div>
                            <span class="f-role">Co-Founder</span>
                        </div>
                    </div>
                </div>
                
                <div>
                    <div class="f-vision-title">Origin & Quality</div>
                    <div class="f-badges">
                        <div class="f-badge">✦ Imported Ingredients</div>
                        <div class="f-badge">🇮🇳 Engineered in India</div>
                        <div class="f-badge">💎 Crystal Series</div>
                    </div>
                    
                    <div style="margin-top:40px;">
                        <button class="btn btn-primary" onclick="smoothScroll('shop')" style="background:#111; color:#fff;">Start Your Order</button>
                    </div>
                </div>
            </div>

            <div class="f-bottom-row">
                <div class="f-nav">
                    <a href="#shop" class="f-nav-link">Order Now</a>
                    <a href="#shop" class="f-nav-link">Shop</a>
                    <a href="#calc" class="f-nav-link">Calculator</a>
                    <a href="#" class="f-nav-link">Contact</a>
                </div>
                <div class="f-copy">
                    © 2026 M-X Lumes. Engineered in Meerut.
                </div>
            </div>
        </div>
    </footer>

    <div class="v-greeting" id="vGreeting">
        Hey, I am Vijeta! I can solve all your queries about our resin products or calculator use. 👋
    </div>

    <div class="vijeta-fab" onclick="toggleVijeta()" title="Ask Vijeta">
        <img src="vijeta.jpg" alt="Vijeta" class="v-avatar">
        <div class="v-online-dot"></div>
    </div>

    <div class="vijeta-panel" id="vijetaPanel">
        <div class="v-header">
            <div class="v-title"><span></span>Vijeta AI Assistant</div>
            <button class="v-close" onclick="toggleVijeta()">×</button>
        </div>
        <div class="v-chat" id="vChatBox"></div>
        <div class="v-input-area">
            <input type="text" id="vInput" class="v-input" placeholder="Type a question..." onkeypress="handleVijetaEnter(event)">
            <button class="v-send" onclick="sendVijetaMsg()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
            </button>
        </div>
    </div>

    <div class="cart-reminder" id="cartReminder">👇</div>

    <div class="cart-fab" onclick="toggleCart()"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2"><path d="M9 20a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm7 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-7-2h7a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-7a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2zm-5-10h2l1 14h13"/></svg><div class="cart-count" id="cartCount">0</div></div>
    
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-overlay" onclick="toggleCart()"></div>
        <div class="cart-inner">
            <div class="cart-header">
                <h2 style="font-size:24px;">Your Bag</h2>
                <button onclick="toggleCart()" style="color:#fff; font-size:24px;">×</button>
            </div>
            
            <div id="cartItems" style="flex:1; overflow-y:auto; padding-right:5px;"></div>
            
            <div class="cart-summary" style="margin-top:20px; border-top:1px solid var(--border); padding-top:20px;">
                <div class="cart-total" style="display:flex; justify-content:space-between; font-size:20px; font-weight:700; margin-bottom:20px;">
                    <span style="color:var(--text-dim); font-size:14px; text-transform:uppercase;">Total Estimate</span>
                    <span id="cartTotal" style="color:#fff;">₹0</span>
                </div>
                
                <button class="checkout-btn" onclick="checkoutWhatsApp()" style="background: var(--whatsapp); color: #000; margin-top: 10px;">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24" style="margin-right: 8px;"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.463 1.065 2.876 1.213 3.074.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
                    Send Order via WhatsApp
                </button>
            </div>
        </div>
    </div>

    <script>
        // =========================================
        // CORE UI LOGIC (GPU Optimized)
        // =========================================
        let ticking = false;
        window.addEventListener('scroll', () => { 
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    document.querySelector('.navbar').classList.toggle('scrolled', window.scrollY > 50); 
                    ticking = false;
                });
                ticking = true;
            }
        }, {passive: true});
        
        function smoothScroll(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        const observer = new IntersectionObserver(entries => { 
            entries.forEach(entry => { 
                if(entry.isIntersecting) { 
                    entry.target.classList.add('active'); 
                    if(entry.target.classList.contains('counter')) countUp(entry.target); 
                } 
            }); 
        }, {threshold: 0.1});
        
        document.querySelectorAll('.reveal, .counter').forEach(el => observer.observe(el));
        
        function countUp(el) { 
            const target = parseInt(el.dataset.target); 
            let count = 0; 
            const inc = target / 30; 
            const timer = setInterval(() => { 
                count += inc; 
                if(count >= target) { count = target; clearInterval(timer); } 
                el.innerText = Math.floor(count) + (el.innerText.includes('%') ? '%' : ''); 
            }, 30); 
        }

        // =========================================
        // TITAN FUSION CALCULATOR LOGIC
        // =========================================
        let appState = { unit: 'cm', shape: 'rect', ratioA: 3, ratioB: 1, mode: 'cast', scannedArea: 0 };

        function setUnit(u) {
            if(appState.unit !== u) {
                const factor = u === 'in' ? 0.3937 : 2.54; 
                ['L', 'W', 'Dia', 'TB', 'TH', 'PB', 'PH', 'SD', 'D'].forEach(key => {
                    const inp = document.getElementById('input-'+key);
                    const sli = document.getElementById('slider-'+key);
                    if(inp && inp.value) { let val = parseFloat(inp.value) * factor; inp.value = val.toFixed(2); sli.value = val; }
                });
            }
            document.querySelectorAll('.unit-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('unit-'+u).classList.add('active');
            appState.unit = u;
            runCalc();
        }

        function setShape(s) {
            appState.shape = s;
            document.querySelectorAll('.shape-btn').forEach(i => i.classList.remove('active'));
            document.getElementById('btn-'+s).classList.add('active');
            
            ['rect', 'circ', 'tri', 'pyr', 'sph', 'scan'].forEach(k => {
                const el = document.getElementById('dims-'+k);
                if(el) el.style.display = 'none';
            });
            
            const activeDims = document.getElementById('dims-'+s);
            if(activeDims) activeDims.style.display = (s === 'scan') ? 'flex' : 'block';
            
            document.getElementById('group-depth').style.display = (s === 'sph' || s === 'pyr') ? 'none' : 'block';
            
            runCalc();
        }

        function sync(id, isSlider = false) {
            const inp = document.getElementById('input-' + id);
            const sli = document.getElementById('slider-' + id);
            if(isSlider) inp.value = sli.value; else sli.value = inp.value;
            runCalc();
        }

        function setRatio(a, b, el) {
            document.querySelectorAll('.ratio-btn').forEach(btn => btn.classList.remove('active'));
            el.classList.add('active');
            document.getElementById('custom-ratio').style.display = 'none';
            appState.ratioA = a;
            appState.ratioB = b;
            runCalc();
        }

        function toggleCustomRatio(el) {
            document.querySelectorAll('.ratio-btn').forEach(btn => btn.classList.remove('active'));
            el.classList.add('active');
            document.getElementById('custom-ratio').style.display = 'flex';
            runCalc();
        }

        function setMode(mode) {
            appState.mode = mode;
            document.querySelectorAll('.mode-opt').forEach(opt => opt.classList.remove('active'));
            document.getElementById('mode-'+mode).classList.add('active');
            runCalc();
        }

        function setPreset(type) {
            if(appState.unit === 'in') setUnit('cm'); 
            if(type === 'varmala') { setShape('rect'); syncSet('L', 30); syncSet('W', 30); syncSet('D', 7.5); setMode('cast'); }
            else if (type === 'clock') { setShape('circ'); syncSet('Dia', 30); syncSet('D', 1); setMode('coat'); }
            else if (type === 'geode') { setShape('circ'); syncSet('Dia', 10); syncSet('D', 0.8); setMode('coat'); }
            else if (type === 'tray') { setShape('rect'); syncSet('L', 30); syncSet('W', 20); syncSet('D', 1.5); setMode('cast'); }
            runCalc();
        }

        function syncSet(id, val) {
            document.getElementById('input-'+id).value = val;
            document.getElementById('slider-'+id).value = val;
        }

        // =========================================
        // ENHANCED WEATHER ENGINE
        // =========================================
        async function autoDetectWeather() {
            const btn = document.querySelector('.auto-btn');
            const status = document.getElementById('weather-status');
            const intelligence = document.getElementById('weather-intelligence');
            
            btn.innerHTML = "🛰️ Triangulating Position...";
            status.style.display = 'block';
            status.innerText = "Attempting Satellite Lock...";
            
            try {
                if(!navigator.geolocation) throw new Error("No Geo");
                const position = await new Promise((resolve, reject) => {
                    navigator.geolocation.getCurrentPosition(resolve, reject, { enableHighAccuracy: false, timeout: 8000, maximumAge: 600000 });
                });
                await fetchWeatherData(position.coords.latitude, position.coords.longitude, btn, status, intelligence);
            } catch (gpsError) {
                console.log("GPS denied/failed. Switching to IP Fallback.");
                status.innerText = "GPS blocked. Switching to Cell Tower triangulation...";
                try {
                    const ipResponse = await fetch('https://get.geojs.io/v1/ip/geo.json');
                    const ipData = await ipResponse.json();
                    await fetchWeatherData(ipData.latitude, ipData.longitude, btn, status, intelligence);
                } catch (ipError) {
                    handleWeatherError(btn, status, "Location Unavailable - Use Sliders");
                }
            }
        }

        async function fetchWeatherData(lat, lon, btn, status, intelligence) {
            status.innerText = "Downloading Atmospheric Data...";
            try {
                const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&hourly=relativehumidity_2m`);
                if (!response.ok) throw new Error("Weather API Error");

                const data = await response.json();
                const tOut = data.current_weather.temperature;
                const currentHour = new Date().getHours();
                const rhOut = data.hourly.relativehumidity_2m[currentHour] || 50;

                let tIn = tOut; 
                if (tOut > 30) { tIn = tOut - ((tOut - 25) * 0.4); }
                else if (tOut < 20) { tIn = tOut + ((20 - tOut) * 0.5); }
                
                const getSVP = (t) => 6.112 * Math.exp((17.67 * t) / (t + 243.5));
                const svpOut = getSVP(tOut);
                const actualVP = (rhOut * svpOut) / 100;
                const svpIn = getSVP(tIn);
                let rhIn = (actualVP / svpIn) * 100;
                rhIn = Math.min(Math.max(rhIn, 20), 99);

                document.getElementById('env-temp').value = Math.round(tIn);
                document.getElementById('val-temp').innerText = Math.round(tIn) + '°C';
                document.getElementById('env-hum').value = Math.round(rhIn);
                document.getElementById('val-hum').innerText = Math.round(rhIn) + '%';
                
                runCalc(); 
                
                btn.innerHTML = "✅ Indoor Climate Synced"; 
                status.style.display = 'none';
                
                intelligence.style.display = "block";
                intelligence.innerHTML = `🛰️ Ext: <b>${tOut}°C</b> / <b>${rhOut}%</b><br>🏠 Int: <b>${Math.round(tIn)}°C</b> / <b>${Math.round(rhIn)}%</b>`;
                
                setTimeout(() => { btn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg> Auto-Detect Conditions'; }, 5000);
            } catch (e) { handleWeatherError(btn, status, "Weather API Offline"); }
        }

        function handleWeatherError(btn, status, msg) {
            btn.innerHTML = "⚠️ " + msg;
            status.innerText = "Please use manual sliders.";
            status.style.color = "var(--warning)";
            setTimeout(() => { btn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg> Auto-Detect Conditions'; status.style.display = 'none'; }, 3000);
        }

        // =========================================
        // AI SMART SCANNER (ADOBE STYLE CONTOUR)
        // =========================================
        let camStream = null;
        let scannedPixelArea = 0;
        let scannedPixelLongestDistance = 0;

        async function openScanner() {
            setShape('scan');
            const overlay = document.getElementById('smart-scanner');
            overlay.style.display = 'flex';
            setTimeout(()=> overlay.classList.add('active'), 10); 
            
            document.getElementById('btn-capture').style.display = 'block';
            document.getElementById('scan-prompt').style.display = 'none';
            document.getElementById('scan-instruction').style.display = 'block';
            
            const video = document.getElementById('camera-feed');
            const canvas = document.getElementById('scanner-canvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height); 
            
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                alert("Camera access is blocked or unsupported. Please use HTTPS.");
                closeScanner();
                setShape('rect');
                return;
            }

            try {
                camStream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
                video.srcObject = camStream;
            } catch (err) {
                alert("Please allow camera access to use the AI Scanner.");
                closeScanner();
                setShape('rect'); 
            }
        }

        function closeScanner() {
            const overlay = document.getElementById('smart-scanner');
            overlay.classList.remove('active');
            setTimeout(() => { overlay.style.display = 'none'; }, 400);
            
            if (camStream) { 
                camStream.getTracks().forEach(track => track.stop()); 
                camStream = null; 
            }
        }

        function captureScanFrame() {
            const video = document.getElementById('camera-feed');
            const canvas = document.getElementById('scanner-canvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            video.pause();
            
            // RADIAL RAYCASTING EDGE DETECTION
            let imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            let d = imgData.data;
            
            let cx = canvas.width / 2;
            let cy = canvas.height / 2;
            
            let centerIdx = (Math.floor(cy) * canvas.width + Math.floor(cx)) * 4;
            let targetR = d[centerIdx], targetG = d[centerIdx+1], targetB = d[centerIdx+2];
            
            let points = [];
            const tolerance = 60; 
            const maxRadius = Math.min(canvas.width, canvas.height) / 2.2;

            for(let i=0; i<64; i++) {
                let angle = (i/64) * Math.PI * 2;
                let edgeFound = false;
                for(let r=10; r<maxRadius; r+=2) {
                    let px = Math.floor(cx + Math.cos(angle)*r);
                    let py = Math.floor(cy + Math.sin(angle)*r);
                    if(px<0 || py<0 || px>=canvas.width || py>=canvas.height) break;
                    
                    let idx = (py * canvas.width + px) * 4;
                    let diff = Math.abs(d[idx]-targetR) + Math.abs(d[idx+1]-targetG) + Math.abs(d[idx+2]-targetB);
                    if(diff > tolerance) {
                        points.push({x: px, y: py});
                        edgeFound = true; break;
                    }
                }
                if(!edgeFound) points.push({x: cx + Math.cos(angle)*maxRadius, y: cy + Math.sin(angle)*maxRadius});
            }

            // Darken Background
            ctx.fillStyle = "rgba(0,0,0,0.7)";
            ctx.fillRect(0,0, canvas.width, canvas.height);
            
            // Draw Glowing Green Polygon
            ctx.beginPath();
            ctx.moveTo(points[0].x, points[0].y);
            for(let i=1; i<points.length; i++) { ctx.lineTo(points[i].x, points[i].y); }
            ctx.closePath();
            ctx.strokeStyle = "#10b981"; 
            ctx.lineWidth = 4;
            ctx.shadowColor = "#10b981";
            ctx.shadowBlur = 15;
            ctx.stroke();

            // Math: Calculate Irregular Pixel Area
            let area = 0;
            for (let i = 0; i < points.length; i++) {
                let j = (i + 1) % points.length;
                area += points[i].x * points[j].y;
                area -= points[j].x * points[i].y;
            }
            scannedPixelArea = Math.abs(area / 2);

            // Math: Find Longest Axis Line
            let maxDist = 0;
            let pt1 = points[0], pt2 = points[0];
            for(let i=0; i<points.length; i++){
                for(let j=i+1; j<points.length; j++){
                    let dist = Math.sqrt(Math.pow(points[i].x - points[j].x, 2) + Math.pow(points[i].y - points[j].y, 2));
                    if(dist > maxDist) { maxDist = dist; pt1 = points[i]; pt2 = points[j]; }
                }
            }
            scannedPixelLongestDistance = maxDist;

            // Draw Red Calibration Line
            ctx.beginPath();
            ctx.moveTo(pt1.x, pt1.y);
            ctx.lineTo(pt2.x, pt2.y);
            ctx.strokeStyle = "#ef4444";
            ctx.shadowColor = "#ef4444";
            ctx.shadowBlur = 10;
            ctx.lineWidth = 3;
            ctx.stroke();
            
            ctx.fillStyle = "#ef4444";
            ctx.beginPath(); ctx.arc(pt1.x, pt1.y, 6, 0, Math.PI*2); ctx.fill();
            ctx.beginPath(); ctx.arc(pt2.x, pt2.y, 6, 0, Math.PI*2); ctx.fill();

            // UI Transitions
            document.getElementById('btn-capture').style.display = 'none';
            document.getElementById('scan-instruction').style.display = 'none';
            document.getElementById('scan-prompt').style.display = 'block';
        }

        function processCalibration() {
            const inputLen = parseFloat(document.getElementById('scan-line-length').value);
            const unit = document.getElementById('scan-unit').value;
            
            if(!inputLen || inputLen <= 0) return alert('Please enter a valid length for the red line.');
            
            // Physics: Irregular Scaling Equation
            let factor = (unit === 'in') ? 2.54 : ((unit === 'mm') ? 0.1 : 1);
            let realLen_cm = inputLen * factor;
            let areaCm2 = scannedPixelArea * Math.pow(realLen_cm / scannedPixelLongestDistance, 2);
            
            appState.scannedArea = areaCm2;
            document.getElementById('scan-area-display').innerText = areaCm2.toFixed(1) + ' cm²';
            
            closeScanner();
            runCalc();
        }

        function runCalc() {
            let h = parseFloat(document.getElementById('input-D').value) || 0;
            let factor = appState.unit === 'in' ? 2.54 : 1;
            let h_cm = h * factor;
            let vol = 0;

            if (appState.shape === 'rect') {
                let l = (parseFloat(document.getElementById('input-L').value)||0) * factor;
                let w = (parseFloat(document.getElementById('input-W').value)||0) * factor;
                vol = l * w * h_cm;
            } else if (appState.shape === 'circ') {
                let d = (parseFloat(document.getElementById('input-Dia').value)||0) * factor;
                vol = (Math.PI * Math.pow(d/2, 2)) * h_cm;
            } else if (appState.shape === 'tri') {
                let b = (parseFloat(document.getElementById('input-TB').value)||0) * factor;
                let th = (parseFloat(document.getElementById('input-TH').value)||0) * factor;
                vol = (0.5 * b * th) * h_cm;
            } else if (appState.shape === 'pyr') {
                let b = (parseFloat(document.getElementById('input-PB').value)||0) * factor;
                let ph = (parseFloat(document.getElementById('input-PH').value)||0) * factor;
                vol = (Math.pow(b, 2) * ph) / 3;
                h_cm = ph; 
            } else if (appState.shape === 'sph') {
                let d = (parseFloat(document.getElementById('input-SD').value)||0) * factor;
                let r = d / 2;
                vol = (4/3) * Math.PI * Math.pow(r, 3);
                h_cm = d; 
            } else if (appState.shape === 'scan') {
                vol = (appState.scannedArea || 0) * h_cm;
            }

            let rA = appState.ratioA; let rB = appState.ratioB;
            if(document.getElementById('custom-ratio').style.display === 'flex') {
                rA = parseFloat(document.getElementById('ratioA').value) || 3;
                rB = parseFloat(document.getElementById('ratioB').value) || 1;
            }
            const density = parseFloat(document.getElementById('densitySelect').value) || 1.13;
            const costPerKg = parseFloat(document.getElementById('costInput').value) || 0;

            const mass = vol * density;
            const totalParts = rA + rB;
            const massA = (mass * rA) / totalParts;
            const massB = (mass * rB) / totalParts;

            document.getElementById('res-total').innerText = Math.round(mass) + 'g';
            document.getElementById('res-a').innerText = Math.round(massA) + 'g';
            document.getElementById('res-b').innerText = Math.round(massB) + 'g';
            if(costPerKg > 0) document.getElementById('est-cost').innerText = '₹' + Math.round((mass/1000)*costPerKg).toLocaleString();

            const temp = parseFloat(document.getElementById('env-temp').value);
            const hum = parseFloat(document.getElementById('env-hum').value);
            const sList = document.getElementById('safety-list');
            const sStatus = document.getElementById('safety-status');
            const sCard = document.getElementById('safety-card');
            
            document.getElementById('val-temp').innerText = temp + '°C';
            document.getElementById('val-hum').innerText = hum + '%';

            let limit = appState.mode === 'coat' ? 0.5 : 2.5; 
            let risks = 0; sList.innerHTML = '';

            if (h_cm > limit && appState.shape !== 'sph') { 
                risks++;
                const layers = Math.ceil(h_cm / limit);
                sList.innerHTML += `<li class="sr-item" style="color:var(--danger)">⚠️ <b>EXOTHERM:</b> Too deep (${h_cm.toFixed(1)}cm).</li>`;
                sList.innerHTML += `<li class="sr-item" style="color:var(--text-dark)">💡 <b>FIX:</b> Pour ${layers} layers of ${(h_cm/layers).toFixed(1)}cm.</li>`;
            }
            if (hum > 70) {
                risks++;
                sList.innerHTML += `<li class="sr-item" style="color:var(--danger)">💧 <b>BLUSH RISK:</b> High humidity inside.</li>`;
                sList.innerHTML += `<li class="sr-item" style="color:var(--text-dark)">💡 Use AC (Dry Mode) or Dehumidifier.</li>`;
            }
            if (temp > 30 && h_cm > 2) {
                risks++;
                sList.innerHTML += `<li class="sr-item" style="color:var(--warning)">🔥 <b>FLASH CURE:</b> Deep pour + Heat = Cracking.</li>`;
            }

            if(risks === 0) {
                sStatus.innerText = "SAFE"; sStatus.style.color = "var(--success)";
                sCard.className = "safety-report safe";
                sList.innerHTML = `<li class="sr-item"><span>✓</span> Indoor conditions optimal. Safe to pour.</li>`;
            } else {
                sStatus.innerText = "ALERT"; sStatus.style.color = "var(--danger)";
                sCard.className = "safety-report danger";
            }
        }

        // =========================================
        // CART & REMINDER LOGIC
        // =========================================
        let cart = [];

        function updateReminder() {
            const reminder = document.getElementById('cartReminder');
            const sidebar = document.getElementById('cartSidebar');
            if (cart.length > 0 && !sidebar.classList.contains('active')) { reminder.classList.add('show'); } 
            else { reminder.classList.remove('show'); }
        }

        function addToCart(name, price) {
            let existingItem = cart.find(i => i.name === name);
            if (existingItem) { existingItem.qty++; } else { cart.push({name, price, qty: 1}); }
            renderCart();
            showToast();
            const fab = document.querySelector('.cart-fab');
            fab.style.transform = 'scale(1.2) rotate(10deg) translate3d(0,0,0)';
            setTimeout(() => fab.style.transform = 'translate3d(0,0,0)', 300);
        }

        function updateQty(name, change) {
            let item = cart.find(i => i.name === name);
            if(item) { item.qty += change; if(item.qty <= 0) removeFromCart(name); }
            renderCart();
        }

        function removeFromCart(name) { cart = cart.filter(i => i.name !== name); renderCart(); }

        function renderCart() {
            const container = document.getElementById('cartItems'); 
            container.innerHTML = ''; 
            let total = 0; let count = 0;

            if (cart.length === 0) {
                container.innerHTML = '<div class="empty-cart">Your cart is empty.<br>Start adding some magic. ✨</div>';
                document.getElementById('cartTotal').innerText = '₹0';
                document.getElementById('cartCount').innerText = '0';
                updateReminder(); return;
            }

            cart.forEach(item => { 
                total += item.price * item.qty; count += item.qty;
                container.innerHTML += `
                <div class="cart-item">
                    <div class="c-info"><h4>${item.name}</h4><p>High-Gloss System</p></div>
                    <div class="c-actions">
                        <div class="c-price">₹${(item.price * item.qty).toLocaleString()}</div>
                        <div class="qty-control">
                            <div class="qty-btn" onclick="updateQty('${item.name}', -1)">-</div>
                            <div class="qty-val">${item.qty}</div>
                            <div class="qty-btn" onclick="updateQty('${item.name}', 1)">+</div>
                        </div>
                    </div>
                </div>`; 
            });
            document.getElementById('cartTotal').innerText = `₹${total.toLocaleString()}`; 
            document.getElementById('cartCount').innerText = count;
            updateReminder();
        }

        function toggleCart() { document.getElementById('cartSidebar').classList.toggle('active'); updateReminder(); }
        function showToast() { const t = document.getElementById('toast'); t.classList.add('show'); setTimeout(() => t.classList.remove('show'), 3000); }
        
        function checkoutWhatsApp() {
            if(cart.length === 0) return alert('Your cart is empty!');
            let total = 0; let msg = `*NEW ORDER REQUEST* %0A------------------%0A`;
            cart.forEach(i => { msg += `• ${i.name} x ${i.qty} = ₹${(i.price * i.qty).toLocaleString()}%0A`; total += i.price * i.qty; });
            msg += `------------------%0A*TOTAL: ₹${total.toLocaleString()}*%0A%0AHi M-X Lumes, I would like to confirm shipping for this order.`;
            window.location.href = `https://wa.me/917668077298?text=${msg}`;
        }

        // =========================================
        // VIJETA AI ASSISTANT
        // =========================================
        let chatInitialized = false;

        window.addEventListener('load', () => {
            setTimeout(() => {
                const greeting = document.getElementById('vGreeting');
                const panel = document.getElementById('vijetaPanel');
                if(greeting && !panel.classList.contains('active')) {
                    greeting.classList.add('show');
                    setTimeout(() => { greeting.classList.remove('show'); }, 6000);
                }
            }, 2000); 
        });

        function toggleVijeta() {
            document.getElementById('vGreeting').classList.remove('show');
            document.getElementById('vijetaPanel').classList.toggle('active');
            if(!chatInitialized) { renderBotMessage(chatFlow.start); chatInitialized = true; }
        }

        function handleVijetaEnter(e) { if(e.key === 'Enter') sendVijetaMsg(); }

        function sendVijetaMsg() {
            const input = document.getElementById('vInput');
            const text = input.value.trim();
            if(!text) return;
            renderUserMessage(text);
            input.value = '';
            setTimeout(() => { 
                renderBotMessage({
                    msg: "That is a great question! For the fastest diagnosis, please select a category below, or click 'Chat with an Expert' on our website to speak with our human team! 👇",
                    opts: chatFlow.start.opts
                });
            }, 750);
        }

        function renderUserMessage(text) {
            const chatBox = document.getElementById('vChatBox');
            chatBox.innerHTML += `<div class="msg user">${text}</div>`;
            chatBox.scrollTop = chatBox.scrollHeight;
            document.querySelectorAll('.v-options').forEach(el => el.style.display = 'none');
        }

        function renderBotMessage(node) {
            const chatBox = document.getElementById('vChatBox');
            let html = `<div class="msg bot" style="white-space: pre-wrap;">${node.msg}</div>`;
            if (node.opts && node.opts.length > 0) {
                html += `<div class="v-options">`;
                node.opts.forEach(opt => { html += `<button class="v-opt-btn" onclick="handleChatOption('${opt.label}', '${opt.next}')">${opt.label}</button>`; });
                html += `</div>`;
            }
            chatBox.innerHTML += html;
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        const chatFlow = {
            start: { msg: "Namaste! 🙏 I am Vijeta, your M-X Lumes Expert & Teacher. I am here to diagnose issues and explain the science of resin. How can I help you today?", opts: [{ label: "🧪 Resin Project Issue", next: "resin_issues" }, { label: "🧮 Calculator Help", next: "calc_help" }] },
            resin_issues: { msg: "I can help you troubleshoot! 👩‍🔬 As a chemical expert, I need to know the symptoms. What exactly is happening with your resin?", opts: [{ label: "Sticky / Won't Cure", next: "diag_sticky" }, { label: "Too Many Bubbles", next: "diag_bubbles" }, { label: "Overheating / Smoking", next: "diag_hot" }, { label: "Cloudy / White Film", next: "diag_cloudy" }] },
            diag_sticky: { msg: "Sticky resin is frustrating! Let's find the blunder. 🧐\n\nDid you measure the M-X Lumes kit by Weight (using a digital scale) or by Volume (using measuring cups)?", opts: [{ label: "By Weight (Scale)", next: "sol_sticky_weight" }, { label: "By Volume (Cups)", next: "sol_sticky_volume" }] },
            sol_sticky_weight: { msg: "Good job using a scale! ⚖️ Since the ratio was correct, this sticky spot was caused by poor Poly-merization.\n\n🧪 **The Chemical Cause:**\nThis happens when you scrape the unmixed resin from the sides of your cup onto your artwork, OR your room is too cold (below 20°C).\n\n✨ **The Fix:**\nScrape out the gooey parts, clean the area with isopropyl alcohol, and do a fresh top-coat. Next time, use the 'Double-Cup' mixing method!", opts: [{ label: "Yes, this helps! 😊", next: "satisfaction_yes" }, { label: "No, I need more help 😕", next: "satisfaction_no" }] },
            sol_sticky_volume: { msg: "Ah! 💡 I found the issue. M-X Lumes 3:1 must ALWAYS be measured by WEIGHT.\n\n🧪 **The Chemical Cause:**\nResin and hardener have completely different densities. Measuring them by volume puts too much hardener in the mix, permanently breaking the chemical ratio.\n\n✨ **The Fix:**\nYou must scrape off the uncured resin, clean thoroughly with rubbing alcohol, and pour a new coat measured perfectly on a digital scale.", opts: [{ label: "Yes, this helps! 😊", next: "satisfaction_yes" }, { label: "No, I need more help 😕", next: "satisfaction_no" }] },
            diag_bubbles: { msg: "Bubbles can ruin a flawless finish! Let's check your fluid dynamics. 🫧\n\nWhat is your room temperature right now?", opts: [{ label: "Cold (Below 22°C)", next: "sol_bubbles_cold" }, { label: "Warm (Above 22°C)", next: "sol_bubbles_warm" }] },
            sol_bubbles_cold: { msg: "That explains it! 🥶\n\n🧪 **The Chemical Cause:**\nCold temperatures make epoxy thick like honey. This high viscosity traps the air you fold in while mixing.\n\n✨ **The Fix:**\nGive your sealed bottles a warm water bath for 10 minutes before mixing. M-X Lumes naturally drops to 28 dynes/cm surface tension—if it's warm, the bubbles will auto-degas perfectly!", opts: [{ label: "Yes, this helps! 😊", next: "satisfaction_yes" }, { label: "No, I need more help 😕", next: "satisfaction_no" }] },
            sol_bubbles_warm: { msg: "Since your room is warm, the resin viscosity is fine. 🌡️\n\n🧪 **The Cause:**\nThose bubbles are likely 'breathing' out of a porous surface (like unsealed wood/flowers) or you whipped the resin too aggressively while mixing.\n\n✨ **The Fix:**\nStir slowly, and ALWAYS seal wood or porous objects with a thin 'primer coat' of resin before doing your main deep pour.", opts: [{ label: "Yes, this helps! 😊", next: "satisfaction_yes" }, { label: "No, I need more help 😕", next: "satisfaction_no" }] },
            diag_hot: { msg: "🔥 Whoa! That is called an 'Exothermic Runaway' (Flash Curing).\n\n🧪 **The Chemical Cause:**\nResin curing generates its own heat. If you mix too much in one cup, or pour too deep in a warm room, the heat gets trapped. The molecules react violently, causing the resin to boil, smoke, and crack.\n\n✨ **The Fix:**\nNever leave a large mixed batch in a cup. Pour it immediately. Also, check our Project Calculator—if you need to pour deeper than 2.5cm, you must pour in multiple smaller layers!", opts: [{ label: "Yes, this helps! 😊", next: "satisfaction_yes" }, { label: "No, I need more help 😕", next: "satisfaction_no" }] },
            diag_cloudy: { msg: "🌧️ That sounds exactly like 'Amine Blush'.\n\n🧪 **The Chemical Cause:**\nWhen the hardener (amine) reacts with moisture and carbon dioxide in high-humidity air before it cross-links with the resin, it creates a waxy, cloudy, or greasy film on the surface.\n\n✨ **The Fix:**\nWash the cured blush off with warm soapy water, lightly sand it, and pour a fresh topcoat. Next time, turn on an AC (Dry Mode) or a dehumidifier while curing!", opts: [{ label: "Yes, this helps! 😊", next: "satisfaction_yes" }, { label: "No, I need more help 😕", next: "satisfaction_no" }] },
            calc_help: { msg: "Our Project Calculator is incredibly advanced. Which feature can I explain for you?", opts: [{ label: "Environment Lab", next: "exp_env" }, { label: "Safety Warnings", next: "exp_safety" }, { label: "How to Measure?", next: "exp_measure" }] },
            exp_env: { msg: "🛰️ **The Environment Lab:**\nIf you click 'Auto-Detect Conditions', I will silently ping GPS satellites to pull your local weather data. My physics algorithm then converts that outside weather into your exact indoor Temperature and Humidity, feeding it into the Safety Engine!", opts: [{ label: "Wow, understood! 😊", next: "satisfaction_yes" }, { label: "I need more help 😕", next: "satisfaction_no" }] },
            exp_safety: { msg: "🛡️ **The Safety Report:**\nBased on the depth you enter and your room temperature, I instantly calculate risks. I will warn you if your pour is too deep (Flash Cure risk) or if your humidity is too high (Amine Blush risk). It takes the guesswork out of resin art!", opts: [{ label: "Very helpful! 😊", next: "satisfaction_yes" }, { label: "I need more help 😕", next: "satisfaction_no" }] },
            exp_measure: { msg: "⚖️ **Total Weight Breakdown:**\nJust enter your mold dimensions (like 30cm x 30cm). I will calculate the exact Total Grams you need, and automatically break it down into the exact Part A (Resin) and Part B (Hardener) you need to pour on your digital scale.", opts: [{ label: "Makes sense! 😊", next: "satisfaction_yes" }, { label: "I need more help 😕", next: "satisfaction_no" }] },
            satisfaction_yes: { msg: "I am so glad I could help! 🎉\n\nSince you are dedicated to perfect resin art, I highly recommend you use our 1.2KG Starter Kit for your next project and compare the quality difference yourself. You will not regret trusting M-X Lumes! 💎", opts: [] },
            satisfaction_no: { msg: "I'm so sorry I couldn't completely fix it! 😔 \n\nEvery art piece is unique. Please drop our human expert team a WhatsApp message. They are available 24/7 to help artists just like you!", opts: [{ label: "💬 Chat with Expert on WhatsApp", next: "redirect_wa" }] },
            redirect_wa: { msg: "Redirecting you to our secure WhatsApp portal...", opts: [] }
        };

        function handleChatOption(label, nextNodeKey) {
            if(nextNodeKey === 'redirect_wa') {
                window.open('https://wa.me/917668077298?text=Hi%20M-X%20Lumes!%20I%20am%20facing%20a%20complex%20issue%20with%20my%20resin%20project%20and%20need%20expert%20help.', '_blank');
                renderUserMessage(label);
                setTimeout(() => {
                    const chatBox = document.getElementById('vChatBox');
                    chatBox.innerHTML += `<div class="msg bot" style="white-space: pre-wrap;">I've opened a chat with our team for you! Is there anything else I can assist with?</div>`;
                    chatBox.scrollTop = chatBox.scrollHeight;
                }, 1000);
                return;
            }
            renderUserMessage(label);
            setTimeout(() => { const nextNode = chatFlow[nextNodeKey]; if(nextNode) renderBotMessage(nextNode); }, 600);
        }

        // =========================================
        // GSAP ENGINE: FLAWLESS BARASINGHA KINEMATICS
        // =========================================
        window.addEventListener('load', () => {
            setTimeout(() => {
                const deerSvg = document.getElementById('animal-svg');
                
                const frontLegL = document.getElementById('leg-fl');
                const frontLegR = document.getElementById('leg-fr');
                const backLegL = document.getElementById('leg-bl');
                const backLegR = document.getElementById('leg-br');
                
                const resinS = document.getElementById('resin-s');
                const popup = document.getElementById('hardness-popup');
                
                const screenWidth = window.innerWidth;
                
                gsap.set(deerSvg, { x: screenWidth, opacity: 1 });

                const mainTimeline = gsap.timeline();

                // 1. PERFECT QUADRUPEDAL TROT (Zero joint breaking, smooth bobbing)
                const walkDuration = 0.8;
                const walkCycle = gsap.timeline({ repeat: 4 }); 
                
                walkCycle.to([frontLegL, backLegR], { rotation: 15, duration: walkDuration, yoyo: true, repeat: 1, ease: "sine.inOut" }, 0)
                         .to([frontLegR, backLegL], { rotation: -15, duration: walkDuration, yoyo: true, repeat: 1, ease: "sine.inOut" }, 0)
                         .to(deerSvg, { y: -1.5, duration: walkDuration, yoyo: true, repeat: 1, ease: "sine.inOut" }, 0);

                mainTimeline.add(walkCycle, 0);
                mainTimeline.to(deerSvg, { x: 0, duration: 8, ease: "none" }, 0); 

                // 2. THE ANTICIPATION (Coils back like a spring)
                mainTimeline.to(deerSvg, { x: 5, rotation: 3, duration: 0.5, ease: "power2.inOut" }, ">") 
                            .to(frontLegL, { rotation: -15, duration: 0.5, ease: "power2.inOut" }, "<"); 

                // 3. TRUE ZERO-GAP STRIKE (Heavy lunge into the negative space of the text)
                mainTimeline.to(deerSvg, { x: -20, rotation: -2, duration: 0.04, ease: "power4.in" }, ">") 
                            .to(frontLegL, { rotation: 25, duration: 0.04, ease: "power4.in" }, "<"); 

                // 4. THE IMPACT (Violent vibration, popup drop)
                mainTimeline.to(resinS, { x: -4, duration: 0.04, yoyo: true, repeat: 7, ease: "rough" }, "<") 
                            .to(popup, { opacity: 1, y: 5, duration: 0.3, ease: "back.out(1.7)" }, "<") 
                            .to(frontLegL, { rotation: 5, duration: 0.2, ease: "bounce.out" }, "<") 
                            .to(deerSvg, { x: 8, rotation: 0, duration: 0.2, ease: "power2.out" }, "<"); 

                // 5. PAUSE AND FLIP
                mainTimeline.to(deerSvg, { scaleX: -1, duration: 0.2 }, "+=1.5");

                // 6. LIMP CYCLE (Walks continuously until 120% off screen)
                const limpCycle = gsap.timeline({ repeat: 6 });
                limpCycle.to(frontLegL, { rotation: -8, duration: walkDuration, yoyo: true, repeat: 1, ease: "power1.inOut" }, 0) 
                         .to([frontLegR, backLegL], { rotation: 15, duration: walkDuration, yoyo: true, repeat: 1, ease: "sine.inOut" }, 0)
                         .to(backLegR, { rotation: -15, duration: walkDuration, yoyo: true, repeat: 1, ease: "sine.inOut" }, 0)
                         .to(deerSvg, { y: -2, duration: walkDuration, yoyo: true, repeat: 1, ease: "sine.inOut" }, 0); 

                mainTimeline.add(limpCycle, ">");
                mainTimeline.to(deerSvg, { x: screenWidth * 1.2, duration: 9.6, ease: "none" }, "<"); 
                mainTimeline.to(popup, { opacity: 0, duration: 0.8 }, "-=3"); // Fades right before it leaves screen

            }, 2000); 
        });

    </script>
</body>
</html>
